import{a as b,H as W,e as f,c as S,o as r,h as e,p as l,k as d,j as s,X as A,Y as y,Z as V,b as n,t as R,u as c,W as u,_ as m,S as O,F as X}from"./index-BaiCGngT.js";import{Q as J,a as ee,b as ae,c as le,d as te}from"./QPageScroller-xc7qQnEt.js";import{Q as z}from"./QTooltip-B7oM7xJw.js";import{Q as oe,a as p,b as t}from"./QItem-bIrTu2LG.js";import{Q as I}from"./format-M0EPHs9A.js";import{Q as se}from"./QExpansionItem-Ew3PrO7q.js";import{Q as re,a as ie,b as ne}from"./QLayout-CnuFrjDQ.js";import{api as Q}from"./axios-DN8dVMgI.js";import{u as de}from"./auth-Dzym9PFD.js";import{u as ue}from"./periodoStore-D1opyND2.js";import{i as ce}from"./index-Cn9OE36k.js";import{u as me}from"./index-B_lsxfTq.js";import{u as pe}from"./index-DmLa8JJ9.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QResizeObserver-DjCd-y25.js";import"./touch-BjYP5sR0.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";import"./index-C_9uIoC2.js";import"./index-ZhWAdK_X.js";const ve=["src"],_e={key:0},be={key:1},ye={class:"q-pa-md",style:{"max-width":"250px"}},ge={class:"rounded p-4"},ke={class:"flex items-center gap-2 mt-4"},Ee={class:"block mb-8"},xe={class:"row q-gutter-md q-mb-md"},Ce={class:"flex justify-end gap-2"},Oe={class:"flex justify-end gap-2"},we={__name:"DirectoresLayout",setup(De){const w=pe(),g=ue(),L=me(),P=b(),k=de(),D=b(!1),E=b(!1),v=b(!1),x=b(),C=b();W(()=>{k.getUsuario(),P.value=Q.defaults.baseURL,g.getPeriodo()});function j(){D.value=!D.value}const q=()=>{L.require({message:"¿Seguro que desea salir?",header:"Salir del Sistema",icon:"pi pi-exclamation-triangle",acceptClass:"text-red p-button-outlined",rejectClass:"p-button-primary",rejectLabel:"Si",acceptLabel:"No",accept:()=>{},reject:()=>{k.logout()}})},U=i=>{if(x.value==null||C.value==null){w.add({severity:"error",summary:"¡Error!",detail:"DEBE INGRESAR EL RANGO DEL PERIODO ESCOLAR",group:"br",life:4e3,closable:!1});return}L.require({target:i.currentTarget,group:"headless",message:"Desea proceder a Reiniciar los Periodos Escolares?",accept:()=>{$()},reject:()=>{}})},$=()=>{var i=new FormData;i.append("inicio",x.value.getFullYear()),i.append("cierre",C.value.getFullYear()),i.append("periodoAnt",g.inicio+" - "+g.cierre),i.append("opcion",1),Q.post("/periodos",i).then(a=>{console.log(a),E.value=!1,x.value=null,C.value=null,w.add({severity:"success",summary:"¡PERIODOS CAMBIADOS!",detail:"EL NUEVO PERIODO ESTA LISTO PARA DAR COMIENZO",group:"br",life:4e3,closable:!1})}).catch(a=>{console.log(a)})},M=()=>{var i=new FormData;i.append("opcion",1),Q.post("/backup",i).then(a=>{v.value=!1,w.add({severity:"success",summary:"¡BACKUP CREADO!",detail:a.data.mensaje||"El respaldo se ha creado exitosamente",group:"br",life:4e3,closable:!1})}).catch(a=>{v.value=!1,w.add({severity:"error",summary:"¡Error!",detail:a.response?.data?.mensaje||"Error al crear el respaldo",group:"br",life:4e3,closable:!1})})};return(i,a)=>{const G=f("router-view"),H=f("Toast"),N=f("ConfirmPopup"),_=f("Button"),h=f("Message"),T=f("DatePicker"),B=f("FloatLabel"),Y=f("Fieldset"),F=f("Dialog");return r(),S(X,null,[e(ne,{view:"lHh Lpr lFf"},{default:l(()=>[e(J,{elevated:""},{default:l(()=>[e(ee,null,{default:l(()=>[e(A,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:j}),e(ae,{class:"my-font text-body2"},{default:l(()=>a[11]||(a[11]=[s(" GESTIÓN INTEGRAL DE CONTROL DEL PERSONAL Y HORARIO ")])),_:1,__:[11]}),y(k).foto?(r(),d(V,{key:0,size:"52px"},{default:l(()=>[n("img",{src:P.value+"fotos/"+y(k).foto,class:"rounded-borders",style:{"max-width":"40px",height:"40px"}},null,8,ve)]),_:1})):(r(),d(V,{key:1,size:"60px","text-color":"white",icon:"no_accounts",rounded:""})),s(" "+R(y(k).nombre)+" ",1),e(A,{color:"white",onClick:a[0]||(a[0]=o=>i.$q.fullscreen.toggle()),icon:i.$q.fullscreen.isActive?"fullscreen_exit":"fullscreen",flat:""},{default:l(()=>[e(z,{"transition-show":"scale","transition-hide":"scale",class:"bg-purple text-body2",offset:[10,10]},{default:l(()=>[i.$q.fullscreen.isActive?(r(),S("div",_e,"Quitar Pantalla Completa")):(r(),S("div",be,"Pantalla Completa"))]),_:1})]),_:1},8,["icon"]),e(A,{flat:"",icon:"logout",color:"white",onClick:a[1]||(a[1]=o=>q()),size:"md"},{default:l(()=>[e(z,{"transition-show":"scale","transition-hide":"scale",class:"bg-purple text-caption",offset:[10,10]},{default:l(()=>a[12]||(a[12]=[s(" Salir del Sistema ")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1}),e(le,{modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=o=>D.value=o),"show-if-above":"",bordered:"",style:{background:"#215968"},width:260,breakpoint:500},{default:l(()=>[e(I,{class:"shadow-10"},{default:l(()=>[e(oe,{header:"",class:"my-font2 text-blue-1 text-h6"},{default:l(()=>a[13]||(a[13]=[s(" AREA DE DIRECTORES ")])),_:1,__:[13]})]),_:1}),n("div",ye,[e(I,{padding:"",class:"rounded-borders text-white"},{default:l(()=>[c((r(),d(p,{clickable:"",to:"/directores",exact:"","active-class":"my-menu-link"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"fas fa-house"})]),_:1}),e(t,null,{default:l(()=>a[14]||(a[14]=[s("Inicio")])),_:1,__:[14]})]),_:1})),[[m]]),c((r(),d(p,{clickable:"",to:"/graficosdirector",exact:"","active-class":"my-menu-link"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-chart-pie"})]),_:1}),e(t,null,{default:l(()=>a[15]||(a[15]=[s("Graficos")])),_:1,__:[15]})]),_:1})),[[m]]),e(O,{spaced:"",inset:"",dark:""}),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/personal"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-user-friends"})]),_:1}),e(t,null,{default:l(()=>a[16]||(a[16]=[s("Personal")])),_:1,__:[16]})]),_:1})),[[m]]),e(O,{spaced:"",inset:"",dark:""}),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/usuarios"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"groups"})]),_:1}),e(t,null,{default:l(()=>a[17]||(a[17]=[s("Usuarios")])),_:1,__:[17]})]),_:1})),[[m]]),e(O,{spaced:"",inset:"",dark:""}),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/historico"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"history"})]),_:1}),e(t,null,{default:l(()=>a[18]||(a[18]=[s("Historico")])),_:1,__:[18]})]),_:1})),[[m]]),e(O,{spaced:"",inset:"",dark:""}),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/cambiopass"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"lock_open"})]),_:1}),e(t,null,{default:l(()=>a[19]||(a[19]=[s("CAMBIO DE CONTRASEÑA")])),_:1,__:[19]})]),_:1})),[[m]]),e(O,{spaced:"",inset:"",dark:""}),e(se,{"expand-separator":"",icon:"perm_identity",label:"Empleados","expand-icon-class":"text-white","content-inset-level":.1,style:{"margin-top":"10px"}},{header:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-cog",size:"sm"})]),_:1}),e(t,null,{default:l(()=>a[20]||(a[20]=[s("Ajustes")])),_:1,__:[20]})]),default:l(()=>[e(I,{style:{"max-width":"318px"},dense:"",padding:""},{default:l(()=>[c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/secciones"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-sort-alpha-up",size:"xs"})]),_:1}),e(t,null,{default:l(()=>a[21]||(a[21]=[s("SECCIONES")])),_:1,__:[21]})]),_:1})),[[m]]),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/materias"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-school",size:"xs"})]),_:1}),e(t,null,{default:l(()=>a[22]||(a[22]=[s(" MATERIAS")])),_:1,__:[22]})]),_:1})),[[m]]),c((r(),d(p,{clickable:"","active-class":"my-menu-link",to:"/directores/horarios"},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-calendar-week",size:"xs"})]),_:1}),e(t,null,{default:l(()=>a[23]||(a[23]=[s("HORARIOS")])),_:1,__:[23]})]),_:1})),[[m]]),c((r(),d(p,{clickable:"","active-class":"my-menu-link ",onClick:a[2]||(a[2]=o=>E.value=!0)},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-calendar",size:"xs"})]),_:1}),e(t,null,{default:l(()=>a[24]||(a[24]=[s(" PERIODO")])),_:1,__:[24]})]),_:1})),[[m]]),c((r(),d(p,{clickable:"","active-class":"my-menu-link ",onClick:a[3]||(a[3]=o=>v.value=!0)},{default:l(()=>[e(t,{avatar:""},{default:l(()=>[e(u,{name:"las la-database",size:"xs"})]),_:1}),e(t,null,{default:l(()=>a[25]||(a[25]=[s(" RESPALDO BASE DE DATOS")])),_:1,__:[25]})]),_:1})),[[m]])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"]),e(re,null,{default:l(()=>[e(G),e(te,{position:"bottom-right","scroll-offset":100,offset:[5,5]},{default:l(()=>[e(A,{round:"",icon:"keyboard_arrow_up",color:"accent",size:"15px",class:"glossy"})]),_:1})]),_:1}),e(ie,{class:"bg-white text-negative text-h6",align:"center"},{default:l(()=>[s("PERÍODO ESCOLAR "+R(y(g).inicio)+" - "+R(y(g).cierre),1)]),_:1})]),_:1}),e(H,{position:"bottom-right",group:"br"}),e(y(ce)),e(N,{group:"templating"}),e(N,{group:"headless"},{container:l(({message:o,acceptCallback:Z,rejectCallback:K})=>[n("div",ge,[n("span",null,R(o.message),1),n("div",ke,[e(_,{label:"Guardar",onClick:Z,size:"small"},null,8,["onClick"]),e(_,{label:"Cancelar",variant:"outlined",onClick:K,severity:"secondary",size:"small",text:""},null,8,["onClick"])])])]),_:1}),e(F,{visible:E.value,"onUpdate:visible":a[8]||(a[8]=o=>E.value=o),modal:"",header:"Nuevo Periodo Escolar",style:{width:"25rem"},closable:!1},{default:l(()=>[n("span",Ee,[e(h,{severity:"warn",icon:"pi pi-exclamation-triangle"},{default:l(()=>a[26]||(a[26]=[n("p",{class:"m-0"}," Al ingresar el nuevo periodo escolar, los datos tales como la matricula de alumnos, notas y horarios seran borrados para darle ingreso al nuevo periodo tome las previsiones correspondientes. La matricula sera respaldada en el historico puede verificar los datos ",-1)])),_:1,__:[26]})]),e(Y,{legend:"Rango del Periodo Escolar"},{default:l(()=>[n("div",xe,[n("div",null,[e(B,{variant:"on"},{default:l(()=>[e(T,{modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=o=>x.value=o),view:"year",dateFormat:"yy",style:{width:"100px"}},null,8,["modelValue"]),a[27]||(a[27]=n("label",{for:"inicio",class:"block mb-2",style:{color:"darkgrey"}},"INICIO",-1))]),_:1,__:[27]})]),n("div",null,[e(B,{variant:"on"},{default:l(()=>[e(T,{modelValue:C.value,"onUpdate:modelValue":a[6]||(a[6]=o=>C.value=o),view:"year",dateFormat:"yy",style:{width:"100px"}},null,8,["modelValue"]),a[28]||(a[28]=n("label",{for:"cierre",class:"block mb-2",style:{color:"darkgrey"}},"CIERRE",-1))]),_:1,__:[28]})])])]),_:1}),n("div",Ce,[e(_,{type:"button",label:"SI",severity:"secondary",onClick:U}),e(_,{type:"button",label:"NO",onClick:a[7]||(a[7]=o=>E.value=!1)})])]),_:1},8,["visible"]),e(F,{visible:v.value,"onUpdate:visible":a[10]||(a[10]=o=>v.value=o),modal:"",header:"Respaldo Base de Datos",style:{width:"25rem"},closable:!1},{default:l(()=>[n("div",Oe,[e(_,{type:"button",label:"SI",severity:"secondary",onClick:M}),e(_,{type:"button",label:"NO",onClick:a[9]||(a[9]=o=>v.value=!1)})])]),_:1},8,["visible"])],64)}}},he=fe(we,[["__scopeId","data-v-9d8e2246"]]);export{he as default};

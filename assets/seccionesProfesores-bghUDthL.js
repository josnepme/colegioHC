import{a as p,H as ne,e as f,c as n,o,h as t,p as s,b as r,j as c,t as d,f as v,S as re,X as de,F as x,g as V,k as m,$ as W}from"./index-BaiCGngT.js";import{Q as ue}from"./QTooltip-B7oM7xJw.js";import{Q as pe}from"./QPage-CeyVCo50.js";import{u as ce}from"./auth-Dzym9PFD.js";import{api as E}from"./axios-DN8dVMgI.js";import{F as ve}from"./index-D2eWy4oi.js";import{m as me}from"./mayusculas-CaPsqoxx.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";const fe={class:"row q-gutter-md q-mt-md"},ye={class:"flex items-center"},_e={class:"flex items-center"},be={key:0},ge={key:0,class:"text-primary",for:"seccion"},ke={key:1,class:"text-blue-grey-4",for:"seccion"},xe={class:"flex flex-wrap items-center gap-2"},Ie={class:"q-gutter-sm"},Ve={key:0},Se={key:0},we={key:0},he={key:0},Fe={key:0},De={key:0},Ce={key:0},Oe={class:"inline-flex items-center justify-center gap-2"},Ne={class:"font-bold whitespace-nowrap"},Ee={class:"row q-gutter-md"},Pe={class:"flex items-center gap-2"},Ae={class:"flex items-center gap-2"},Ge={__name:"seccionesProfesores",setup(Le){const P=p({global:{value:null,matchMode:ve.CONTAINS}}),B=ce(),k=p(""),M=p([]),Q=p([]),R=p(),j=p(""),$=p(""),g=p([]),w=p(!1),q=p(null),G=p(""),X=p(""),z=p(""),h=p(0),F=p(0),D=p(0),A=p(null),C=p(!1),O=p(!1),N=p(""),Y=async()=>{var i=new FormData;i.append("opcion",9),i.append("id",B.iduser);const a=await E.post("profesores",i).finally(()=>{});j.value=a.data.nombre,$.value=a.data.apellido,R.value=a.data.id,Z(a.data.id)},Z=async i=>{var a=new FormData;a.append("opcion",2),a.append("idprof",i);const b=await E.post("profesores",a).finally(()=>{});M.value=b.data},H=async i=>{var a=new FormData;a.append("opcion",10),a.append("idprof",R.value),a.append("idseccion",i);const b=await E.post("profesores",a).finally(()=>{});Q.value=b.data,ee(k.value.id)},ee=async i=>{var a=new FormData;a.append("opcion",11),a.append("idseccion",i);const b=await E.post("profesores",a).finally(()=>{});g.value=b.data};ne(()=>{B.getUsuario(),Y()});const ae=(i,a,b,S)=>{h.value=0,F.value=0,D.value=0,C.value=!1,O.value=!1,N.value="",A.value=null,g.value.filter(u=>{u.id_alumno==i&&(h.value=u.lapso1),u.id_alumno==i&&(F.value=u.lapso2),u.id_alumno==i&&(D.value=u.lapso3),u.id_alumno==i&&(A.value=u.id),u.id_alumno==i&&(C.value=u.revision==1),u.id_alumno==i&&(O.value=u.art112==1),u.id_alumno==i&&(N.value=u.observaciones)}),w.value=!0,q.value=i,G.value=a,X.value=b,z.value=S},I=(i,a,b)=>{let S=0;return S=(parseFloat(i)+parseFloat(a)+parseFloat(b))/3,S.toFixed(1)},le=async()=>{var i=new FormData;i.append("opcion",12),i.append("idnota",A.value?A.value:null),i.append("lapso1",h.value),i.append("lapso2",F.value),i.append("lapso3",D.value),i.append("revision",C.value==!0?1:0),i.append("art112",O.value==!0?1:0),i.append("observaciones",me(N.value)),i.append("idprof",R.value),i.append("idasig",k.value.id),i.append("idsecc",k.value.id_seccion),i.append("idalumno",q.value),await E.post("profesores",i).then(a=>{a.data.mensaje=="ok"?W.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):W.create({message:a.data.mensaje+" "+a.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{w.value=!1,H(k.value.id_seccion)})};return(i,a)=>{const b=f("Message"),S=f("Select"),u=f("FloatLabel"),oe=f("InputIcon"),K=f("InputText"),se=f("IconField"),y=f("Column"),_=f("Tag"),L=f("Checkbox"),te=f("DataTable"),U=f("InputNumber"),J=f("Button"),ie=f("Dialog");return o(),n(x,null,[t(pe,{padding:""},{default:s(()=>[t(b,{severity:"info"},{default:s(()=>[c("PROF. "+d(j.value)+" "+d($.value),1)]),_:1}),r("div",fe,[r("div",null,[t(u,{variant:"on"},{default:s(()=>[t(S,{name:"seccion",id:"seccion",modelValue:k.value,"onUpdate:modelValue":[a[0]||(a[0]=l=>k.value=l),a[1]||(a[1]=l=>H(k.value.id_seccion))],options:M.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"descripcion",style:{width:"500px"},dataKey:"id"},{option:s(l=>[r("div",ye,[r("div",null,d(l.option.descripcion)+" - "+d(l.option.materia),1)])]),value:s(l=>[r("div",_e,[l.value?(o(),n("div",be,d(l.value.descripcion)+" - "+d(l.value.materia),1)):v("",!0)])]),_:1},8,["modelValue","options"]),k.value?(o(),n("label",ge,"SECCÍON")):(o(),n("label",ke,"INGRESE UNA SECCÍON"))]),_:1})]),t(re,{spaced:"",inset:""}),t(te,{value:Q.value,tableStyle:"min-width: 10rem",showGridlines:"",stripedRows:"",filters:P.value,"onUpdate:filters":a[3]||(a[3]=l=>P.value=l),paginator:"",rows:5,rowsPerPageOptions:[5,10,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}",scrollable:""},{header:s(()=>[r("div",xe,[t(se,{iconPosition:"left"},{default:s(()=>[t(oe,null,{default:s(()=>a[13]||(a[13]=[r("i",{class:"pi pi-search"},null,-1)])),_:1,__:[13]}),t(K,{modelValue:P.value.global.value,"onUpdate:modelValue":a[2]||(a[2]=l=>P.value.global.value=l),placeholder:"Buscar Alumno...",style:{height:"36px"}},null,8,["modelValue"])]),_:1})])]),default:s(()=>[t(y,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:s(l=>[r("div",Ie,[t(de,{size:"sm",class:"shadow-5",round:"",color:"blue-10",icon:"edit",padding:"xs",onClick:e=>ae(l.data.id,l.data.cedula,l.data.nombres,l.data.apellidos)},{default:s(()=>[t(ue,{"transition-show":"scale","transition-hide":"scale",class:"bg-blue-10",offset:[10,10]},{default:s(()=>a[14]||(a[14]=[c(" Editar ")])),_:1,__:[14]})]),_:2},1032,["onClick"])])]),_:1}),t(y,{field:"cedula",header:"CEDULA"}),t(y,{field:"nombres",header:"NOMBRES"}),t(y,{field:"apellidos",header:"APELLIDOS"}),t(y,{field:"sexo",header:"SEXO"}),t(y,{header:"I LAPSO "},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",Ve,[e.lapso1>17?(o(),m(_,{key:0,severity:"success",value:"Success"},{default:s(()=>[c(d(e.lapso1),1)]),_:2},1024)):e.lapso1>9&&e.lapso1<18?(o(),m(_,{key:1,severity:"info",value:"Info"},{default:s(()=>[c(d(e.lapso1),1)]),_:2},1024)):e.lapso1<10?(o(),m(_,{key:2,severity:"danger",value:"Danger"},{default:s(()=>[c(d(e.lapso1),1)]),_:2},1024)):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"II LAPSO "},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",Se,[e.lapso2>17?(o(),m(_,{key:0,severity:"success",value:"Success"},{default:s(()=>[c(d(e.lapso2),1)]),_:2},1024)):e.lapso2>9&&e.lapso2<18?(o(),m(_,{key:1,severity:"info",value:"Info"},{default:s(()=>[c(d(e.lapso2),1)]),_:2},1024)):e.lapso2<10?(o(),m(_,{key:2,severity:"danger",value:"Danger"},{default:s(()=>[c(d(e.lapso2),1)]),_:2},1024)):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"III LAPSO "},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",we,[e.lapso3>17?(o(),m(_,{key:0,severity:"success",value:"Success"},{default:s(()=>[c(d(e.lapso3),1)]),_:2},1024)):e.lapso3>9&&e.lapso3<18?(o(),m(_,{key:1,severity:"info",value:"Info"},{default:s(()=>[c(d(e.lapso3),1)]),_:2},1024)):e.lapso3<10?(o(),m(_,{key:2,severity:"danger",value:"Danger"},{default:s(()=>[c(d(e.lapso3),1)]),_:2},1024)):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"PROMEDIO"},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",he,[I(e.lapso1,e.lapso2,e.lapso3)>17?(o(),m(_,{key:0,severity:"success",value:"Success"},{default:s(()=>[c(d(I(e.lapso1,e.lapso2,e.lapso3)),1)]),_:2},1024)):I(e.lapso1,e.lapso2,e.lapso3)>9.4&&I(e.lapso1,e.lapso2,e.lapso3)<18?(o(),m(_,{key:1,severity:"info",value:"Info"},{default:s(()=>[c(d(I(e.lapso1,e.lapso2,e.lapso3)),1)]),_:2},1024)):I(e.lapso1,e.lapso2,e.lapso3)<9.5?(o(),m(_,{key:2,severity:"danger",value:"Danger"},{default:s(()=>[c(d(I(e.lapso1,e.lapso2,e.lapso3)),1)]),_:2},1024)):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"REVISION"},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",Fe,[(e.revision==1?e.revision=!0:e.revision=!1)?(o(),m(L,{key:0,modelValue:e.revision,"onUpdate:modelValue":T=>e.revision=T,binary:"",readonly:"",variant:"filled"},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"ART. 112"},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",De,[(e.art112==1?e.art112=!0:e.art112=!1)?(o(),m(L,{key:0,modelValue:e.art112,"onUpdate:modelValue":T=>e.art112=T,binary:"",readonly:"",variant:"filled"},null,8,["modelValue","onUpdate:modelValue"])):v("",!0)])):v("",!0)]))),128))]),_:1}),t(y,{header:"OBSERVACIONES"},{body:s(l=>[(o(!0),n(x,null,V(g.value,e=>(o(),n("div",{key:e.id},[e.id_alumno==l.data.id?(o(),n("div",Ce,d(e.observaciones),1)):v("",!0)]))),128))]),_:1})]),_:1},8,["value","filters"])])]),_:1}),t(ie,{visible:w.value,"onUpdate:visible":a[12]||(a[12]=l=>w.value=l),modal:"",header:"Edit Profile",style:{width:"25rem"},closable:!1},{header:s(()=>[r("div",Oe,[r("span",Ne,d(G.value)+" "+d(X.value)+" "+d(z.value),1)])]),footer:s(()=>[t(J,{label:"Guardar",text:"",severity:"primary",onClick:a[10]||(a[10]=l=>le()),autofocus:""}),t(J,{label:"Cancelar",variant:"outlined",severity:"negative",onClick:a[11]||(a[11]=l=>w.value=!1),autofocus:""})]),default:s(()=>[a[21]||(a[21]=r("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Actualice la Informacion.",-1)),r("div",Ee,[r("div",null,[t(u,{variant:"on"},{default:s(()=>[t(U,{id:"lapso1",name:"lapso1",modelValue:h.value,"onUpdate:modelValue":a[4]||(a[4]=l=>h.value=l),inputId:"lapso1",fluid:"",inputStyle:"text-align: center;",style:{height:"36px",width:"100px"},min:0,max:20,minFractionDigits:1,maxFractionDigits:1},null,8,["modelValue"]),a[15]||(a[15]=r("label",{for:"lapso1",class:"block mb-2",style:{color:"darkgrey","background-color":"aliceblue"}},"LAPSO I",-1))]),_:1,__:[15]})]),r("div",null,[t(u,{variant:"on"},{default:s(()=>[t(U,{id:"lapso2",name:"lapso2",modelValue:F.value,"onUpdate:modelValue":a[5]||(a[5]=l=>F.value=l),inputId:"lapso2",fluid:"",inputStyle:"text-align: center;",style:{height:"36px",width:"100px"},min:0,max:20,minFractionDigits:1,maxFractionDigits:1},null,8,["modelValue"]),a[16]||(a[16]=r("label",{for:"lapso2",class:"block mb-2",style:{color:"darkgrey","background-color":"aliceblue"}},"LAPSO II",-1))]),_:1,__:[16]})]),r("div",null,[t(u,{variant:"on"},{default:s(()=>[t(U,{id:"lapso3",name:"lapso3",modelValue:D.value,"onUpdate:modelValue":a[6]||(a[6]=l=>D.value=l),inputId:"lapso3",fluid:"",inputStyle:"text-align: center;",style:{height:"36px",width:"100px"},min:0,max:20,minFractionDigits:1,maxFractionDigits:1},null,8,["modelValue"]),a[17]||(a[17]=r("label",{for:"lapso3",class:"block mb-2",style:{color:"darkgrey","background-color":"aliceblue"}},"LAPSO III",-1))]),_:1,__:[17]})]),r("div",Pe,[t(L,{modelValue:C.value,"onUpdate:modelValue":a[7]||(a[7]=l=>C.value=l),binary:"",variant:"filled",inputId:"revision",name:"revision"},null,8,["modelValue"]),a[18]||(a[18]=r("label",{for:"revision",class:"text-sm"},"REVISION",-1))]),r("div",Ae,[t(L,{modelValue:O.value,"onUpdate:modelValue":a[8]||(a[8]=l=>O.value=l),binary:"",variant:"filled",inputId:"art112",name:"art112"},null,8,["modelValue"]),a[19]||(a[19]=r("label",{for:"art112",class:"text-sm"},"ART. 112",-1))]),r("div",null,[t(u,{variant:"on"},{default:s(()=>[t(K,{name:"observaciones",id:"observaciones",modelValue:N.value,"onUpdate:modelValue":a[9]||(a[9]=l=>N.value=l),style:{height:"36px",width:"350px","background-color":"aliceblue","text-transform":"uppercase"}},null,8,["modelValue"]),a[20]||(a[20]=r("label",{for:"observaciones",class:"block mb-2",style:{color:"darkgrey","background-color":"aliceblue"}},"OBSERVACIONES",-1))]),_:1,__:[20]})])])]),_:1,__:[21]},8,["visible"])],64)}}};export{Ge as default};

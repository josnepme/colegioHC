import{Q as J}from"./QTooltip-B7oM7xJw.js";import{a as k,H as W,e as y,k as n,o,p as a,b as c,h as s,c as f,X as Y,j as p,F as C,g as R,f as _,t as l}from"./index-BaiCGngT.js";import{Q as Z,a as w}from"./QTr-Dkz9ZL21.js";import{Q as ee}from"./QTable-0f2DwlCa.js";import{api as h}from"./axios-DN8dVMgI.js";import{F as ae}from"./index-D2eWy4oi.js";import{u as oe}from"./periodoStore-D1opyND2.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./position-engine-B8a81rwn.js";import"./format-M0EPHs9A.js";import"./QChip-DfYhG3Yd.js";import"./QItem-bIrTu2LG.js";import"./index-DR3ylfnb.js";const se={class:"row q-gutter-md q-mt-md"},le={key:0,class:"text-primary",for:"seccion"},ne={key:1,class:"text-blue-grey-4",for:"seccion"},re={class:"flex flex-wrap gap-2"},ie={class:"q-gutter-sm"},de={key:0},ce={key:0},ue={key:0},pe={key:0},me={class:"text-body2"},fe={class:"text-caption"},_e={class:"text-caption"},ye={class:"text-caption"},ve={class:"text-caption"},we={class:"text-caption"},be={class:"text-caption"},ke={class:"text-caption"},ge={class:"text-caption"},xe={class:"text-caption"},he={class:"text-caption"},Ie={class:"text-caption"},Se={class:"text-caption"},Oe={__name:"notasComponent",props:["ano"],setup(B){const A=oe(),I=k(""),L=k([]),V=B,T=k([]),g=k([]),S=k({global:{value:null,matchMode:ae.CONTAINS}}),F=k([]),O=k({}),P=async()=>{var d=new FormData;d.append("opcion",1),d.append("grado",V.ano+"°");const t=await h.post("secciones",d).finally(()=>{});L.value=t.data},N=async(d,t)=>{var m=new FormData;m.append("opcion",15),m.append("idseccion",t),m.append("idalumno",d);const x=await h.post("profesores",m).finally(()=>{});T.value=x.data},M=async d=>{var t=new FormData;t.append("opcion",16),t.append("idseccion",d);const m=await h.post("profesores",t).finally(()=>{});g.value=m.data},Q=async d=>{var t=new FormData;t.append("opcion",1),t.append("id_seccion",d);const m=await h.post("alumnos",t).finally(()=>{});F.value=m.data,M(d)};W(()=>{P()});const j=d=>{O.value={},O.value[d.data.id]=!0,N(d.data.id,d.data.id_seccion)},q=()=>{N(0,0)},u=d=>{let t=0;return d&&(t=parseFloat(d)),t.toFixed(2)},G=async d=>{var t=new FormData;t.append("id_alum",d),t.append("periodo",A.inicio+" - "+A.cierre),t.append("opcion",6),h.post("alumnos",t,{responseType:"arraybuffer",headers:{Accept:"application/pdf"}}).then(m=>{var x=m.data;const E=window.URL.createObjectURL(new Blob([x])),b=document.createElement("a");b.href=E,b.setAttribute("download","BOLETIN.pdf"),document.body.appendChild(b),b.click(),URL.revokeObjectURL(b.href),document.body.removeChild(b)}).finally(()=>{}).catch(m=>{console.error("There was an error!",m.message)})};return(d,t)=>{const m=y("Message"),x=y("Select"),E=y("FloatLabel"),b=y("InputIcon"),H=y("InputText"),K=y("IconField"),v=y("Column"),r=y("Tag"),U=y("Checkbox"),$=y("ScrollPanel"),z=y("DataTable"),X=y("Card");return o(),n(X,null,{title:a(()=>[s(m,null,{default:a(()=>[p(l(V.ano)+"° AÑO ",1)]),_:1})]),content:a(()=>[t[7]||(t[7]=c("div",{class:"text-h6"},"NOTAS",-1)),c("div",se,[c("div",null,[s(E,{variant:"on"},{default:a(()=>[s(x,{name:"seccion",id:"seccion",modelValue:I.value,"onUpdate:modelValue":[t[0]||(t[0]=i=>I.value=i),t[1]||(t[1]=i=>Q(I.value))],options:L.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"descripcion","option-value":"id",style:{width:"170px"},dataKey:"id","clear-icon":"pi pi-trash"},null,8,["modelValue","options"]),I.value?(o(),f("label",le,"SECCÍON")):(o(),f("label",ne,"INGRESE UNA SECCÍON"))]),_:1})]),s(z,{expandedRows:O.value,"onUpdate:expandedRows":t[3]||(t[3]=i=>O.value=i),value:F.value,dataKey:"id",filters:S.value,"onUpdate:filters":t[4]||(t[4]=i=>S.value=i),scrollable:"",scrollHeight:"500px",tableStyle:"min-width: 70rem",onRowExpand:j,onRowCollapse:q,showGridlines:""},{header:a(()=>[c("div",re,[s(K,{iconPosition:"left"},{default:a(()=>[s(b,null,{default:a(()=>t[5]||(t[5]=[c("i",{class:"pi pi-search"},null,-1)])),_:1,__:[5]}),s(H,{modelValue:S.value.global.value,"onUpdate:modelValue":t[2]||(t[2]=i=>S.value.global.value=i),placeholder:"Buscar alumno...",style:{height:"36px",width:"300px"}},null,8,["modelValue"])]),_:1})])]),expansion:a(i=>[c("div",me,[c("div",null,l(i.data.cedulae)+" - "+l(i.data.nombres)+", "+l(i.data.apellidos),1),s($,{style:{width:"100%",height:"250px"},dt:{bar:{background:"{primary.color}"}}},{default:a(()=>[s(ee,{"table-header-class":"text-white bg-secondary glossy text-body2",class:"small-text-table",separator:"cell",dense:"",style:{height:"250px"},"rows-per-page-options":[0],rows:T.value,columns:[{name:"materia",align:"left",label:"MATERIAS",field:"materia",sortable:!0,classes:"text-caption"},{name:"lapso1",align:"center",label:"I LAPSO",field:"lapso1",sortable:!0,classes:"text-caption"},{name:"lapso2",align:"center",label:"II LAPSO",field:"lapso2",sortable:!0,classes:"text-caption"},{name:"lapso3",align:"center",label:"III LAPSO",field:"lapso3",sortable:!0,classes:"text-caption"},{name:"promedio",align:"center",label:"PROMEDIO",field:"promedio",sortable:!0,classes:"text-caption"},{name:"revision",align:"center",label:"REVISION",field:"revision",sortable:!0,classes:"text-caption"},{name:"art112",align:"center",label:"ART. 112",field:"art112",sortable:!0,classes:"text-caption"},{name:"observaciones",align:"center",label:"OBSERVACIONES",field:"observaciones",sortable:!0,classes:"text-caption"},{name:"profesor",align:"left",label:"PROFESOR",field:"profesor",sortable:!0,classes:"text-caption"}],"row-key":"id"},{body:a(e=>[s(Z,{props:e},{default:a(()=>[s(w,{key:"materia",props:e},{default:a(()=>[c("span",fe,l(e.row.materia),1)]),_:2},1032,["props"]),s(w,{key:"lapso1",props:e},{default:a(()=>[e.row.lapso1>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[c("span",_e,l(e.row.lapso1),1)]),_:2},1024)):e.row.lapso1>9&&e.row.lapso1<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[c("span",ye,l(e.row.lapso1),1)]),_:2},1024)):e.row.lapso1<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[c("span",ve,l(e.row.lapso1),1)]),_:2},1024)):_("",!0)]),_:2},1032,["props"]),s(w,{key:"lapso2",props:e},{default:a(()=>[e.row.lapso2>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[c("span",we,l(e.row.lapso2),1)]),_:2},1024)):e.row.lapso2>9&&e.row.lapso2<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[c("span",be,l(e.row.lapso2),1)]),_:2},1024)):e.row.lapso2<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[c("span",ke,l(e.row.lapso2),1)]),_:2},1024)):_("",!0)]),_:2},1032,["props"]),s(w,{key:"lapso3",props:e},{default:a(()=>[e.row.lapso3>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[c("span",ge,l(e.row.lapso3),1)]),_:2},1024)):e.row.lapso3>9&&e.row.lapso3<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[c("span",xe,l(e.row.lapso3),1)]),_:2},1024)):e.row.lapso3<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[c("span",he,l(e.row.lapso3),1)]),_:2},1024)):_("",!0)]),_:2},1032,["props"]),s(w,{key:"promedio",props:e},{default:a(()=>[u(e.row.promedio)>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(l(u(e.row.promedio)),1)]),_:2},1024)):u(e.row.promedio)>9.4&&u(e.row.promedio)<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(l(u(e.row.promedio)),1)]),_:2},1024)):u(e.row.promedio)<9.5?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(l(u(e.row.promedio)),1)]),_:2},1024)):_("",!0)]),_:2},1032,["props"]),s(w,{key:"revision",props:e},{default:a(()=>[(e.row.revision==1?e.row.revision=!0:e.row.revision=!1)?(o(),n(U,{key:0,modelValue:e.row.revision,"onUpdate:modelValue":D=>e.row.revision=D,binary:"",readonly:"",variant:"filled"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0)]),_:2},1032,["props"]),s(w,{key:"art112",props:e},{default:a(()=>[(e.row.art112==1?e.row.art112=!0:e.row.art112=!1)?(o(),n(U,{key:0,modelValue:e.row.art112,"onUpdate:modelValue":D=>e.row.art112=D,binary:"",readonly:"",variant:"filled"},null,8,["modelValue","onUpdate:modelValue"])):_("",!0)]),_:2},1032,["props"]),s(w,{key:"observaciones",props:e},{default:a(()=>[c("span",Ie,l(e.row.observaciones),1)]),_:2},1032,["props"]),s(w,{key:"profesor",props:e},{default:a(()=>[c("span",Se,l(e.row.profesor),1)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})])]),default:a(()=>[s(v,{expander:"",style:{width:"5rem"}}),s(v,{field:"accion",header:"Boleta",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:a(i=>[c("div",ie,[s(Y,{size:"sm",class:"shadow-5",round:"",color:"blue-10",icon:"print",padding:"xs",onClick:e=>G(i.data.id)},{default:a(()=>[s(J,{"transition-show":"scale","transition-hide":"scale",class:"bg-blue-10",offset:[10,10]},{default:a(()=>t[6]||(t[6]=[p(" Imprimir Boletin ")])),_:1,__:[6]})]),_:2},1032,["onClick"])])]),_:1}),s(v,{field:"cedulae",header:"CEDULA ESCOLAR"}),s(v,{field:"cedula",header:"CEDULA"}),s(v,{field:"nombres",header:"NOMBRE"}),s(v,{field:"apellidos",header:"APELLIDO"}),s(v,{header:"I LAPSO"},{body:a(i=>[(o(!0),f(C,null,R(g.value,e=>(o(),f("div",{key:e.id},[e.id_alumno==i.data.id?(o(),f("div",de,[e.lapso1>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(l(u(e.lapso1)),1)]),_:2},1024)):e.lapso1>9&&e.lapso1<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(l(u(e.lapso1)),1)]),_:2},1024)):e.lapso1<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(l(u(e.lapso1)),1)]),_:2},1024)):_("",!0)])):_("",!0)]))),128))]),_:1}),s(v,{header:"II LAPSO"},{body:a(i=>[(o(!0),f(C,null,R(g.value,e=>(o(),f("div",{key:e.id},[e.id_alumno==i.data.id?(o(),f("div",ce,[e.lapso2>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(l(u(e.lapso2)),1)]),_:2},1024)):e.lapso2>9&&e.lapso2<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(l(u(e.lapso2)),1)]),_:2},1024)):e.lapso2<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(l(u(e.lapso2)),1)]),_:2},1024)):_("",!0)])):_("",!0)]))),128))]),_:1}),s(v,{header:"III LAPSO"},{body:a(i=>[(o(!0),f(C,null,R(g.value,e=>(o(),f("div",{key:e.id},[e.id_alumno==i.data.id?(o(),f("div",ue,[e.lapso3>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(l(u(e.lapso3)),1)]),_:2},1024)):e.lapso3>9&&e.lapso3<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(l(u(e.lapso3)),1)]),_:2},1024)):e.lapso3<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(l(u(e.lapso3)),1)]),_:2},1024)):_("",!0)])):_("",!0)]))),128))]),_:1}),s(v,{header:"PROMEDIO"},{body:a(i=>[(o(!0),f(C,null,R(g.value,e=>(o(),f("div",{key:e.id},[e.id_alumno==i.data.id?(o(),f("div",pe,[e.promedio>17?(o(),n(r,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(l(u(e.promedio)),1)]),_:2},1024)):e.promedio>9&&e.promedio<18?(o(),n(r,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(l(u(e.promedio)),1)]),_:2},1024)):e.promedio<10?(o(),n(r,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(l(u(e.promedio)),1)]),_:2},1024)):_("",!0)])):_("",!0)]))),128))]),_:1})]),_:1},8,["expandedRows","value","filters"])])]),_:1})}}},Me=te(Oe,[["__scopeId","data-v-5a895532"]]);export{Me as default};

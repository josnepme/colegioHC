import{a as m,H as le,e as p,c as v,o as r,h as a,p as t,R as G,U as T,b as s,X as u,j as f,t as g,Y as D,k as O,f as F,u as Q,a1 as ne,F as se,$ as k}from"./index-BaiCGngT.js";import{Q as L}from"./QTooltip-B7oM7xJw.js";import{Q as ie}from"./QPage-CeyVCo50.js";import{C as M}from"./ClosePopup-DY4xp4Mw.js";import{api as w}from"./axios-DN8dVMgI.js";import{m as re,c as de,a as $,s as j}from"./index.esm-1pO_CygL.js";import"./index-C_9uIoC2.js";import{F as me}from"./index-D2eWy4oi.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";import"./_commonjsHelpers-CqkleIqs.js";const ue={class:"flex flex-wrap items-center gap-2"},ce={class:"q-gutter-sm"},pe={class:"row q-gutter-sm q-mt-md"},ve={class:"flex items-center"},fe={key:0,class:"text-primary",for:"grado"},ge={key:1,class:"text-blue-grey-4",for:"grado"},ye={class:"flex items-center"},be={key:0,class:"text-primary",for:"seccion"},xe={key:1,class:"text-blue-grey-4",for:"seccion"},_e={align:"left",class:"q-mt-md q-gutter-sm"},Ce={class:"row q-gutter-sm q-mt-md"},Ve={class:"flex items-center"},ke={key:0,class:"text-primary",for:"grado"},we={key:1,class:"text-blue-grey-4",for:"grado"},Se={class:"flex items-center"},Ne={key:0,class:"text-primary",for:"seccion"},he={key:1,class:"text-blue-grey-4",for:"seccion"},Ee={align:"left",class:"q-mt-md q-gutter-sm"},Ie={align:"right",class:"q-mt-md"},Qe={__name:"seccionesPage",setup(Re){const S=m({global:{value:null,matchMode:me.CONTAINS}}),N=m([]),K=m(),b=m(null),i=m(),x=m(!1),d=m(""),c=m(""),_=m(!1),P=m(!1),C=async()=>{var o=new FormData;o.append("opcion",2);const e=await w.post("secciones",o).finally(()=>{});N.value=e.data},z=m({grado:"",seccion:""}),H=m({grado:"*",seccion:"*"}),B=re(de({grado:$().required("El grado es requerida."),seccion:$().required("la Seccion es requerida.")}));le(()=>{C(),K.value=w.defaults.baseURL});const h=(o,e)=>{o&&e&&(c.value=o+" "+e)},X=({valid:o})=>{o&&J()},Y=({valid:o})=>{o&&Z()},J=async()=>{var o=new FormData;o.append("grado",i.value),o.append("seccion",d.value),o.append("descripcion",c.value),o.append("opcion",3),w.post("secciones",o).then(e=>{e.data.mensaje=="ok"?k.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):k.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{C(),x.value=!1,E()}).catch(e=>{console.error("There was an error!",e.message)})},W=(o,e,q,V)=>{b.value=o,i.value=e,d.value=q,c.value=V,_.value=!0},Z=async()=>{var o=new FormData;o.append("grado",i.value),o.append("seccion",d.value),o.append("descripcion",c.value),o.append("id",b.value),o.append("opcion",4),w.post("secciones",o).then(e=>{e.data.mensaje=="ok"?k.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):k.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{C(),_.value=!1,E()}).catch(e=>{console.error("There was an error!",e.message)})},ee=o=>{b.value=o,P.value=!0},ae=()=>{var o=new FormData;o.append("id",b.value),o.append("opcion",5),w.post("materia",o).then(e=>{k.create({message:e.data.mensaje,icon:"check",color:"positive",textColor:"white",position:"center"})}).finally(()=>{C()}).catch(e=>{console.error("There was an error!",e.message)})},E=()=>{b.value="",i.value="",d.value="",c.value=""};return(o,e)=>{const q=p("InputIcon"),V=p("InputText"),te=p("IconField"),I=p("Column"),oe=p("DataTable"),R=p("Select"),y=p("FloatLabel"),U=p("Message"),A=p("Dialog");return r(),v(se,null,[a(ie,{padding:""},{default:t(()=>[a(G,{class:"my-card"},{default:t(()=>[a(T,null,{default:t(()=>e[20]||(e[20]=[s("div",{class:"text-h6"},"SECCIONES",-1)])),_:1,__:[20]}),a(T,null,{default:t(()=>[a(oe,{value:N.value,tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}",filters:S.value,"onUpdate:filters":e[3]||(e[3]=l=>S.value=l),dataKey:"id",paginator:!0},{empty:t(()=>e[21]||(e[21]=[f(" No se encontraron Registros. ")])),footer:t(()=>[f(" Total "+g(N.value?N.value.length:0)+" Registros. ",1)]),header:t(()=>[s("div",ue,[a(te,{iconPosition:"left"},{default:t(()=>[a(q,null,{default:t(()=>e[22]||(e[22]=[s("i",{class:"pi pi-search"},null,-1)])),_:1,__:[22]}),a(V,{modelValue:S.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>S.value.global.value=l),placeholder:"Buscar...",style:{height:"36px"}},null,8,["modelValue"])]),_:1}),a(u,{class:"q-ml-sm glossy",color:"primary",label:"Nuevo",onClick:e[1]||(e[1]=l=>x.value=!0)}),a(u,{flat:"",round:"",icon:"refresh",onClick:e[2]||(e[2]=l=>C())},{default:t(()=>[a(L,null,{default:t(()=>e[23]||(e[23]=[f(" Refrescar ")])),_:1,__:[23]})]),_:1})])]),default:t(()=>[a(I,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:t(l=>[s("div",ce,[a(u,{size:"sm",class:"shadow-5",round:"",color:"blue-10",icon:"edit",padding:"xs",onClick:n=>W(l.data.id,l.data.grado,l.data.seccion,l.data.descripcion)},{default:t(()=>[a(L,{"transition-show":"scale","transition-hide":"scale",class:"bg-blue-10",offset:[10,10]},{default:t(()=>e[24]||(e[24]=[f(" Editar ")])),_:1,__:[24]})]),_:2},1032,["onClick"]),a(u,{round:"",color:"red",icon:"delete",padding:"xs",size:"sm",onClick:n=>ee(l.data.id)},{default:t(()=>[a(L,null,{default:t(()=>e[25]||(e[25]=[f(" Borrar ")])),_:1,__:[25]})]),_:2},1032,["onClick"])])]),_:1}),a(I,{field:"grado",header:"GRADO"}),a(I,{field:"seccion",header:"SECCION"}),a(I,{field:"descripcion",header:"DESCRIPCION"})]),_:1},8,["value","filters"])]),_:1})]),_:1})]),_:1}),a(A,{visible:x.value,"onUpdate:visible":e[10]||(e[10]=l=>x.value=l),style:{width:"250px"},header:"Nueva Seccíon",modal:!0,closable:!1},{default:t(()=>[a(D(j),{initialValues:z.value,resolver:D(B),onSubmit:X},{default:t(l=>[s("div",pe,[s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(R,{name:"grado",modelValue:i.value,"onUpdate:modelValue":[e[4]||(e[4]=n=>i.value=n),e[5]||(e[5]=n=>h(i.value,d.value))],options:[{name:"1°"},{name:"2°"},{name:"3°"},{name:"4°"},{name:"5°"},{name:"6°"}],optionLabel:"name",optionValue:"name",id:"grado",style:{height:"36px",width:"160px"},dataKey:"name",pt:{option:"flex items-center"}},{option:t(n=>[s("div",ve,[s("div",null,g(n.option.name),1)])]),_:1},8,["modelValue"]),i.value?(r(),v("label",fe,"AÑO")):(r(),v("label",ge,"INGRESE UN AÑO"))]),_:1}),l.grado?.invalid?(r(),O(U,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[f(g(l.grado.error.message),1)]),_:2},1024)):F("",!0)]),s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(R,{name:"seccion",modelValue:d.value,"onUpdate:modelValue":[e[6]||(e[6]=n=>d.value=n),e[7]||(e[7]=n=>h(i.value,d.value))],options:[{name:"A"},{name:"B"},{name:"C"},{name:"D"},{name:"E"},{name:"F"},{name:"G"},{name:"H"},{name:"I"},{name:"J"},{name:"K"},{name:"L"},{name:"M"},{name:"N"},{name:"O"},{name:"P"},{name:"Q"},{name:"R"},{name:"S"},{name:"T"},{name:"U"},{name:"V"},{name:"W"},{name:"X"},{name:"Y"},{name:"Z"}],optionLabel:"name",optionValue:"name",id:"seccion",style:{height:"36px",width:"160px"},dataKey:"name",pt:{option:"flex items-center"}},{option:t(n=>[s("div",ye,[s("div",null,g(n.option.name),1)])]),_:1},8,["modelValue"]),i.value?(r(),v("label",be,"SECCÍON")):(r(),v("label",xe,"INGRESE UNA SECCION"))]),_:1}),l.seccion?.invalid?(r(),O(U,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[f(g(l.seccion.error.message),1)]),_:2},1024)):F("",!0)]),s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(V,{name:"descripcion",id:"descripcion",modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=n=>c.value=n),style:{height:"36px",width:"200px","text-transform":"uppercase"},readonly:""},null,8,["modelValue"]),e[26]||(e[26]=s("label",{class:"text-primary",for:"materia"},"DESCRIPCÍON",-1))]),_:1,__:[26]})])]),s("div",_e,[a(u,{color:"primary",type:"submit",label:"Guardar"}),a(u,{color:"secondary",label:"Cancelar",onClick:e[9]||(e[9]=n=>(x.value=!1,E()))})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"]),a(A,{visible:_.value,"onUpdate:visible":e[17]||(e[17]=l=>_.value=l),style:{width:"250px"},header:"Editar Seccíon",modal:!0,closable:!1},{default:t(()=>[a(D(j),{initialValues:H.value,resolver:D(B),onSubmit:Y,class:"border-10"},{default:t(l=>[s("div",Ce,[s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(R,{name:"grado",modelValue:i.value,"onUpdate:modelValue":[e[11]||(e[11]=n=>i.value=n),e[12]||(e[12]=n=>h(i.value,d.value))],options:[{name:"1°"},{name:"2°"},{name:"3°"},{name:"4°"},{name:"5°"},{name:"6°"}],optionLabel:"name",optionValue:"name",id:"grado",style:{height:"36px",width:"160px"},dataKey:"name",pt:{option:"flex items-center"}},{option:t(n=>[s("div",Ve,[s("div",null,g(n.option.name),1)])]),_:1},8,["modelValue"]),i.value?(r(),v("label",ke,"AÑO")):(r(),v("label",we,"INGRESE UN AÑO"))]),_:1}),l.grado?.invalid?(r(),O(U,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[f(g(l.grado.error.message),1)]),_:2},1024)):F("",!0)]),s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(R,{name:"seccion",modelValue:d.value,"onUpdate:modelValue":[e[13]||(e[13]=n=>d.value=n),e[14]||(e[14]=n=>h(i.value,d.value))],options:[{name:"A"},{name:"B"},{name:"C"},{name:"D"},{name:"E"},{name:"F"},{name:"G"},{name:"H"},{name:"I"},{name:"J"},{name:"K"},{name:"L"},{name:"M"},{name:"N"},{name:"O"},{name:"P"},{name:"Q"},{name:"R"},{name:"S"},{name:"T"},{name:"U"},{name:"V"},{name:"W"},{name:"X"},{name:"Y"},{name:"Z"}],optionLabel:"name",optionValue:"name",id:"seccion",style:{height:"36px",width:"160px"},dataKey:"name",pt:{option:"flex items-center"}},{option:t(n=>[s("div",Se,[s("div",null,g(n.option.name),1)])]),_:1},8,["modelValue"]),i.value?(r(),v("label",Ne,"SECCÍON")):(r(),v("label",he,"INGRESE UNA SECCION"))]),_:1}),l.seccion?.invalid?(r(),O(U,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[f(g(l.seccion.error.message),1)]),_:2},1024)):F("",!0)]),s("div",null,[a(y,{variant:"on"},{default:t(()=>[a(V,{name:"descripcion",id:"descripcion",modelValue:c.value,"onUpdate:modelValue":e[15]||(e[15]=n=>c.value=n),style:{height:"36px",width:"200px","text-transform":"uppercase"},readonly:""},null,8,["modelValue"]),e[27]||(e[27]=s("label",{class:"text-primary",for:"materia"},"DESCRIPCÍON",-1))]),_:1,__:[27]})])]),s("div",Ee,[a(u,{color:"primary",type:"submit",label:"Guardar"}),a(u,{color:"secondary",label:"Cancelar",onClick:e[16]||(e[16]=n=>(_.value=!1,E()))})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"]),a(ne,{modelValue:P.value,"onUpdate:modelValue":e[19]||(e[19]=l=>P.value=l),persistent:""},{default:t(()=>[a(G,{style:{border:"1px","border-color":"#d2d2d2","border-radius":"10px"}},{default:t(()=>[a(T,null,{default:t(()=>e[28]||(e[28]=[s("span",null,[s("strong",{class:"text-h6"},"Borrar")],-1)])),_:1,__:[28]}),s("div",Ie,[Q(a(u,{flat:"",label:"Borrar",color:"primary",onClick:e[18]||(e[18]=l=>ae())},null,512),[[M]]),Q(a(u,{flat:"",label:"cancelar",color:"primary"},null,512),[[M]])])]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Qe as default};

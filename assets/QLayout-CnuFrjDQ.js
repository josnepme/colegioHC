import{D as H,I as Q,a0 as M,ae as q,af as B,a as y,ay as W,a5 as c,w as b,a6 as _,az as A,J as g,K as I,P as D,aA as K,aB as N,aC as j,av as U,H as G,al as J,aD as k,aE as X,aF as F,r as L,aG as Y}from"./index-BaiCGngT.js";import{Q as V}from"./QResizeObserver-DjCd-y25.js";const ne=H({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:x,emit:i}){const{proxy:{$q:n}}=Q(),o=M(B,q);if(o===q)return console.error("QFooter needs to be child of QLayout"),q;const a=y(parseInt(e.heightHint,10)),u=y(!0),p=y(W.value===!0||o.isContainer.value===!0?0:window.innerHeight),f=c(()=>e.reveal===!0||o.view.value.indexOf("F")!==-1||n.platform.is.ios&&o.isContainer.value===!0),s=c(()=>o.isContainer.value===!0?o.containerHeight.value:p.value),w=c(()=>{if(e.modelValue!==!0)return 0;if(f.value===!0)return u.value===!0?a.value:0;const t=o.scroll.value.position+s.value+a.value-o.height.value;return t>0?t:0}),m=c(()=>e.modelValue!==!0||f.value===!0&&u.value!==!0),z=c(()=>e.modelValue===!0&&m.value===!0&&e.reveal===!0),d=c(()=>"q-footer q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-bottom"+(e.bordered===!0?" q-footer--bordered":"")+(m.value===!0?" q-footer--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus"+(f.value!==!0?" hidden":""):"")),C=c(()=>{const t=o.rows.value.bottom,r={};return t[0]==="l"&&o.left.space===!0&&(r[n.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(r[n.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),r});function h(t,r){o.update("footer",t,r)}function S(t,r){t.value!==r&&(t.value=r)}function P({height:t}){S(a,t),h("size",t)}function $(){if(e.reveal!==!0)return;const{direction:t,position:r,inflectionPoint:v}=o.scroll.value;S(u,t==="up"||r-v<100||o.height.value-s.value-r-a.value<300)}function T(t){z.value===!0&&S(u,!0),i("focusin",t)}b(()=>e.modelValue,t=>{h("space",t),S(u,!0),o.animate()}),b(w,t=>{h("offset",t)}),b(()=>e.reveal,t=>{t===!1&&S(u,e.modelValue)}),b(u,t=>{o.animate(),i("reveal",t)}),b([a,o.scroll,o.height],$),b(()=>n.screen.height,t=>{o.isContainer.value!==!0&&S(p,t)});const l={};return o.instances.footer=l,e.modelValue===!0&&h("size",a.value),h("space",e.modelValue),h("offset",w.value),_(()=>{o.instances.footer===l&&(o.instances.footer=void 0,h("size",0),h("offset",0),h("space",!1))}),()=>{const t=A(x.default,[g(V,{debounce:0,onResize:P})]);return e.elevated===!0&&t.push(g("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),g("footer",{class:d.value,style:C.value,onFocusin:T},t)}}}),le=H({name:"QPageContainer",setup(e,{slots:x}){const{proxy:{$q:i}}=Q(),n=M(B,q);if(n===q)return console.error("QPageContainer needs to be child of QLayout"),q;D(K,!0);const o=c(()=>{const a={};return n.header.space===!0&&(a.paddingTop=`${n.header.size}px`),n.right.space===!0&&(a[`padding${i.lang.rtl===!0?"Left":"Right"}`]=`${n.right.size}px`),n.footer.space===!0&&(a.paddingBottom=`${n.footer.size}px`),n.left.space===!0&&(a[`padding${i.lang.rtl===!0?"Right":"Left"}`]=`${n.left.size}px`),a});return()=>g("div",{class:"q-page-container",style:o.value},I(x.default))}}),{passive:O}=N,Z=["both","horizontal","vertical"],ee=H({name:"QScrollObserver",props:{axis:{type:String,validator:e=>Z.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:j},emits:["scroll"],setup(e,{emit:x}){const i={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,o,a;b(()=>e.scrollTarget,()=>{f(),p()});function u(){n?.();const m=Math.max(0,k(o)),z=X(o),d={top:m-i.position.top,left:z-i.position.left};if(e.axis==="vertical"&&d.top===0||e.axis==="horizontal"&&d.left===0)return;const C=Math.abs(d.top)>=Math.abs(d.left)?d.top<0?"up":"down":d.left<0?"left":"right";i.position={top:m,left:z},i.directionChanged=i.direction!==C,i.delta=d,i.directionChanged===!0&&(i.direction=C,i.inflectionPoint=i.position),x("scroll",{...i})}function p(){o=U(a,e.scrollTarget),o.addEventListener("scroll",s,O),s(!0)}function f(){o!==void 0&&(o.removeEventListener("scroll",s,O),o=void 0)}function s(m){if(m===!0||e.debounce===0||e.debounce==="0")u();else if(n===null){const[z,d]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];n=()=>{d(z),n=null}}}const{proxy:w}=Q();return b(()=>w.$q.lang.rtl,u),G(()=>{a=w.$el.parentNode,p()}),_(()=>{n?.(),f()}),Object.assign(w,{trigger:s,getPosition:()=>i}),J}}),ie=H({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:x,emit:i}){const{proxy:{$q:n}}=Q(),o=y(null),a=y(n.screen.height),u=y(e.container===!0?0:n.screen.width),p=y({position:0,direction:"down",inflectionPoint:0}),f=y(0),s=y(W.value===!0?0:F()),w=c(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),m=c(()=>e.container===!1?{minHeight:n.screen.height+"px"}:null),z=c(()=>s.value!==0?{[n.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),d=c(()=>s.value!==0?{[n.lang.rtl===!0?"right":"left"]:0,[n.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function C(l){if(e.container===!0||document.qScrollPrevented!==!0){const t={position:l.position.top,direction:l.direction,directionChanged:l.directionChanged,inflectionPoint:l.inflectionPoint.top,delta:l.delta.top};p.value=t,e.onScroll!==void 0&&i("scroll",t)}}function h(l){const{height:t,width:r}=l;let v=!1;a.value!==t&&(v=!0,a.value=t,e.onScrollHeight!==void 0&&i("scrollHeight",t),P()),u.value!==r&&(v=!0,u.value=r),v===!0&&e.onResize!==void 0&&i("resize",l)}function S({height:l}){f.value!==l&&(f.value=l,P())}function P(){if(e.container===!0){const l=a.value>f.value?F():0;s.value!==l&&(s.value=l)}}let $=null;const T={instances:{},view:c(()=>e.view),isContainer:c(()=>e.container),rootRef:o,height:a,containerHeight:f,scrollbarWidth:s,totalWidth:c(()=>u.value+s.value),rows:c(()=>{const l=e.view.toLowerCase().split(" ");return{top:l[0].split(""),middle:l[1].split(""),bottom:l[2].split("")}}),header:L({size:0,offset:0,space:!1}),right:L({size:300,offset:0,space:!1}),footer:L({size:0,offset:0,space:!1}),left:L({size:300,offset:0,space:!1}),scroll:p,animate(){$!==null?clearTimeout($):document.body.classList.add("q-body--layout-animate"),$=setTimeout(()=>{$=null,document.body.classList.remove("q-body--layout-animate")},155)},update(l,t,r){T[l][t]=r}};if(D(B,T),F()>0){let l=function(){v=null,R.classList.remove("hide-scrollbar")},t=function(){if(v===null){if(R.scrollHeight>n.screen.height)return;R.classList.add("hide-scrollbar")}else clearTimeout(v);v=setTimeout(l,300)},r=function(E){v!==null&&E==="remove"&&(clearTimeout(v),l()),window[`${E}EventListener`]("resize",t)},v=null;const R=document.body;b(()=>e.container!==!0?"add":"remove",r),e.container!==!0&&r("add"),Y(()=>{r("remove")})}return()=>{const l=A(x.default,[g(ee,{onScroll:C}),g(V,{onResize:h})]),t=g("div",{class:w.value,style:m.value,ref:e.container===!0?void 0:o,tabindex:-1},l);return e.container===!0?g("div",{class:"q-layout-container overflow-hidden",ref:o},[g(V,{onResize:S}),g("div",{class:"absolute-full",style:z.value},[g("div",{class:"scroll",style:d.value},[t])])]):t}}});export{le as Q,ne as a,ie as b};

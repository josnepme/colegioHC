import{D as I,a as x,E as j,G as B,H as F,I as R,J as O,K as D,L as N,M as V,N as U,O as Y,P as T,Q as $,k as z,o as G,p as n,h as a,R as H,b as w,S as A,U as L,v as k,V as q,W as S,X as M,t as K}from"./index-BaiCGngT.js";import{Q as J,a as W,b as X}from"./QLayout-CnuFrjDQ.js";import{Q as Z}from"./QPage-CeyVCo50.js";import{_ as ee}from"./logo-B6Zx7vy2.js";import{u as te}from"./auth-Dzym9PFD.js";import{d as oe}from"./dayjs.min-BKp1R7gU.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QResizeObserver-DjCd-y25.js";import"./axios-DN8dVMgI.js";import"./_commonjsHelpers-CqkleIqs.js";const re=I({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(d,{slots:y,emit:m}){const p=R(),i=x(null);let c=0;const l=[];function g(e){const f=typeof e=="boolean"?e:d.noErrorFocus!==!0,h=++c,C=(o,r)=>{m(`validation${o===!0?"Success":"Error"}`,r)},P=o=>{const r=o.validate();return typeof r.then=="function"?r.then(u=>({valid:u,comp:o}),u=>({valid:!1,comp:o,err:u})):Promise.resolve({valid:r,comp:o})};return(d.greedy===!0?Promise.all(l.map(P)).then(o=>o.filter(r=>r.valid!==!0)):l.reduce((o,r)=>o.then(()=>P(r).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(o=>[o])).then(o=>{if(o===void 0||o.length===0)return h===c&&C(!0),!0;if(h===c){const{comp:r,err:u}=o[0];if(u!==void 0&&console.error(u),C(!1,r),f===!0){const Q=o.find(({comp:E})=>typeof E.focus=="function"&&N(E.$)===!1);Q!==void 0&&Q.comp.focus()}}return!1})}function v(){c++,l.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function t(e){e!==void 0&&V(e);const f=c+1;g().then(h=>{f===c&&h===!0&&(d.onSubmit!==void 0?m("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function s(e){e!==void 0&&V(e),m("reset"),U(()=>{v(),d.autofocus===!0&&d.noResetFocus!==!0&&b()})}function b(){Y(()=>{if(i.value===null)return;(i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),f=>f.tabIndex!==-1))?.focus({preventScroll:!0})})}T($,{bindComponent(e){l.push(e)},unbindComponent(e){const f=l.indexOf(e);f!==-1&&l.splice(f,1)}});let _=!1;return j(()=>{_=!0}),B(()=>{_===!0&&d.autofocus===!0&&b()}),F(()=>{d.autofocus===!0&&b()}),Object.assign(p.proxy,{validate:g,resetValidation:v,submit:t,reset:s,focus:b,getValidationComponents:()=>l}),()=>O("form",{class:"q-form",ref:i,onSubmit:t,onReset:s},D(y.default))}}),se={class:"card flex justify-content-center",style:{width:"300px"}},ne={class:"row justify-center items-center text-caption q-gutter-lg-sm"},ie={__name:"loginPage",setup(d){const y=x(""),m=x(""),p=x(!0),i=x(""),c=te();F(()=>{i.value=g()});async function l(v,t){await c.login(v,t).catch(s=>console.error("There was an error!",s.message))}function g(){return oe().format("YYYY")}return(v,t)=>(G(),z(X,null,{default:n(()=>[a(J,{class:"fondo"},{default:n(()=>[a(Z,{class:"flex flex-center"},{default:n(()=>[a(H,{dark:"",class:"q-pl-sm q-pr-sm shadow-10 justify-center items-center bg-grey-1",style:{width:"270px",height:"350px","border-width":"1px","border-radius":"5px 5px 5px 5px"}},{default:n(()=>[t[5]||(t[5]=w("div",{class:"row justify-center q-mt-md"},[w("img",{src:ee,width:"150",height:"110"})],-1)),a(A,{dark:""}),a(L,null,{default:n(()=>[a(re,{onSubmit:t[4]||(t[4]=k(()=>{},["prevent"])),class:"row q-gutter-md justify-center items-center"},{default:n(()=>[a(q,{rounded:"",dense:"",outlined:"",modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),label:"Usuario",style:{width:"260px","max-width":"225px"},"lazy-rules":"",clearable:""},{prepend:n(()=>[a(S,{name:"account_circle"})]),_:1},8,["modelValue"]),a(q,{rounded:"",dense:"",outlined:"",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=s=>m.value=s),label:"Contraseña",style:{width:"225px","max-width":"260px"},clearable:"",type:p.value?"password":"text"},{prepend:n(()=>[a(S,{name:"lock"})]),append:n(()=>[a(S,{name:p.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=s=>p.value=!p.value)},null,8,["name"])]),_:1},8,["modelValue","type"]),a(A,{spaced:""}),w("div",se,[a(M,{color:"positive",class:"full-width",rounded:"","text-color":"white",label:"Entrar",onClick:t[3]||(t[3]=k(s=>l(y.value,m.value),["prevent"])),type:"submit",glossy:""})])]),_:1})]),_:1})]),_:1,__:[5]}),a(W,{class:"text-blue-grey-4",style:{"background-color":"transparent"}},{default:n(()=>[w("div",ne," ° "+K(i.value)+' Sistema Automatizado Para la Gestion Integral del Control de Personal y Horarios. Complejo Educativo "Hugo Rafael Chavez Frias" . BARCELONA ESTADO ANZOÁTEGUI ',1)]),_:1})]),_:1})]),_:1})]),_:1}))}},be=ae(ie,[["__scopeId","data-v-47558d35"]]);export{be as default};

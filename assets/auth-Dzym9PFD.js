import{aH as n,$ as i}from"./index-BaiCGngT.js";import{api as u}from"./axios-DN8dVMgI.js";const l=n("auth",{state:()=>({token:"",nombre:"",rol:"",foto:"",usuario:"",iduser:""}),getters:{},actions:{async login(o,r){var s=new FormData;s.append("usuario",o),s.append("password",r),s.append("opcion",1);const a=await u.post("auth",s);if(a.data.mensaje=="ok"){const e=a.data.token;switch(t(e).data.rol){case"DIRECTOR":this.router.push("/directores");break;case"PROFESORES":this.router.push("/profesores");break;case"ADMINISTRATIVO":this.router.push("/administrativo");break;default:this.router.push("/");break}sessionStorage.setItem("token",e),this.token=e,this.nombre=t(e).data.nombre,this.rol=t(e).data.rol,this.foto=t(e).data.foto,this.usuario=t(e).data.usuario,this.iduser=t(e).data.id,i.create({message:"Â¡Ingresado Satisfactoriamente! ",color:"positive",textColor:"white",classes:"glossy",position:"center",multiLine:!0,timeout:2e3})}else i.create({message:a.data.mensaje,icon:"error",color:"negative",textColor:"white",classes:"glossy",position:"bottom"});return a.data.mensaje},async getUsuario(){if(sessionStorage.getItem("token")){const o=sessionStorage.getItem("token");this.token=o,this.nombre=t(o).data.nombre,this.rol=t(o).data.rol,this.foto=t(o).data.foto,this.usuario=t(o).data.usuario,this.iduser=t(o).data.id}else this.token=null},logout(){this.token="",sessionStorage.clear(),this.router.push("/")}}}),t=o=>JSON.parse(atob(o.split(".")[1]));export{l as u};

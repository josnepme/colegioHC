import{a as d,H as le,e as m,c as p,o as s,h as a,p as t,R as D,U as w,b as r,X as u,j as c,t as f,Y as S,k as V,f as O,u as M,a1 as oe,F as re,$ as I}from"./index-BaiCGngT.js";import{Q as P}from"./QTooltip-B7oM7xJw.js";import{Q as ie}from"./QPage-CeyVCo50.js";import{C as q}from"./ClosePopup-DY4xp4Mw.js";import{api as _}from"./axios-DN8dVMgI.js";import{m as se,c as ne,a as B,s as Y}from"./index.esm-1pO_CygL.js";import"./index-C_9uIoC2.js";import{F as de}from"./index-D2eWy4oi.js";import{m as Q}from"./mayusculas-CaPsqoxx.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";import"./_commonjsHelpers-CqkleIqs.js";const ue={class:"flex flex-wrap items-center gap-2"},me={class:"q-gutter-sm"},pe={class:"row q-gutter-sm q-mt-md"},ce={key:0,class:"text-primary",for:"materia"},ve={key:1,class:"text-blue-grey-4",for:"materia"},fe={class:"flex items-center"},ge={key:0,class:"text-primary",for:"tipo"},Ae={key:1,class:"text-blue-grey-4",for:"tipo"},Ce={align:"left",class:"q-mt-md q-gutter-sm"},ye={class:"row q-gutter-sm q-mt-md"},Ie={key:0,class:"text-primary",for:"materia"},_e={key:1,class:"text-blue-grey-4",for:"materia"},be={class:"flex items-center"},Ne={key:0,class:"text-primary",for:"tipo"},xe={key:1,class:"text-blue-grey-4",for:"tipo"},Te={align:"left",class:"q-mt-md q-gutter-sm"},Re={align:"right",class:"q-mt-md"},Me={__name:"materiasPage",setup(Ee){const b=d({global:{value:null,matchMode:de.CONTAINS}}),N=d([]),j=d(),g=d(null),v=d(),A=d(!1),n=d(""),C=d(!1),k=d(!1),y=async()=>{var o=new FormData;o.append("opcion",1);const e=await _.post("materias",o).finally(()=>{});N.value=e.data},z=d({materia:"",tipo:""}),$=d({materia:"*",tipo:"*"}),U=se(ne({materia:B().required("El nombre de la Materia es requerida."),tipo:B().required("El tipo de la Materia es requerida.")}));le(()=>{y(),j.value=_.defaults.baseURL});const K=({valid:o})=>{o&&X()},H=({valid:o})=>{o&&W()},X=async()=>{var o=new FormData;o.append("materia",Q(n.value)),o.append("tipo",v.value),o.append("opcion",2),_.post("materias",o).then(e=>{e.data.mensaje=="ok"?I.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):I.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{y(),A.value=!1,x()}).catch(e=>{console.error("There was an error!",e.message)})},J=(o,e,h)=>{g.value=o,n.value=e,v.value=h,C.value=!0},W=async()=>{var o=new FormData;o.append("materia",Q(n.value)),o.append("tipo",v.value),o.append("id",g.value),o.append("opcion",3),_.post("materias",o).then(e=>{e.data.mensaje=="ok"?I.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):I.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{y(),C.value=!1,x()}).catch(e=>{console.error("There was an error!",e.message)})},Z=o=>{g.value=o,k.value=!0},ee=()=>{var o=new FormData;o.append("id",g.value),o.append("opcion",4),_.post("materia",o).then(e=>{I.create({message:e.data.mensaje,icon:"check",color:"positive",textColor:"white",position:"center"})}).finally(()=>{y()}).catch(e=>{console.error("There was an error!",e.message)})},x=()=>{g.value="",n.value="",v.value=""};return(o,e)=>{const h=m("InputIcon"),L=m("InputText"),ae=m("IconField"),T=m("Column"),te=m("DataTable"),R=m("FloatLabel"),E=m("Message"),F=m("Select"),G=m("Dialog");return s(),p(re,null,[a(ie,{padding:""},{default:t(()=>[a(D,{class:"my-card"},{default:t(()=>[a(w,null,{default:t(()=>e[14]||(e[14]=[r("div",{class:"text-h6"},"ASIGNATURAS",-1)])),_:1,__:[14]}),a(w,null,{default:t(()=>[a(te,{value:N.value,tableStyle:"min-width: 50rem",rows:10,rowsPerPageOptions:[10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}",filters:b.value,"onUpdate:filters":e[3]||(e[3]=l=>b.value=l),dataKey:"id",paginator:!0},{empty:t(()=>e[15]||(e[15]=[c(" No se encontraron Registros. ")])),footer:t(()=>[c(" Total "+f(N.value?N.value.length:0)+" Registros. ",1)]),header:t(()=>[r("div",ue,[a(ae,{iconPosition:"left"},{default:t(()=>[a(h,null,{default:t(()=>e[16]||(e[16]=[r("i",{class:"pi pi-search"},null,-1)])),_:1,__:[16]}),a(L,{modelValue:b.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=l=>b.value.global.value=l),placeholder:"Buscar...",style:{height:"36px"}},null,8,["modelValue"])]),_:1}),a(u,{class:"q-ml-sm glossy",color:"primary",label:"Nuevo",onClick:e[1]||(e[1]=l=>A.value=!0)}),a(u,{flat:"",round:"",icon:"refresh",onClick:e[2]||(e[2]=l=>y())},{default:t(()=>[a(P,null,{default:t(()=>e[17]||(e[17]=[c(" Refrescar ")])),_:1,__:[17]})]),_:1})])]),default:t(()=>[a(T,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:t(l=>[r("div",me,[a(u,{size:"sm",class:"shadow-5",round:"",color:"blue-10",icon:"edit",padding:"xs",onClick:i=>J(l.data.id,l.data.materia,l.data.tipos)},{default:t(()=>[a(P,{"transition-show":"scale","transition-hide":"scale",class:"bg-blue-10",offset:[10,10]},{default:t(()=>e[18]||(e[18]=[c(" Editar ")])),_:1,__:[18]})]),_:2},1032,["onClick"]),a(u,{round:"",color:"red",icon:"delete",padding:"xs",size:"sm",onClick:i=>Z(l.data.id)},{default:t(()=>[a(P,null,{default:t(()=>e[19]||(e[19]=[c(" Borrar ")])),_:1,__:[19]})]),_:2},1032,["onClick"])])]),_:1}),a(T,{field:"codigo",header:"CODIGO"}),a(T,{field:"materia",header:"ASIGNATURA"}),a(T,{field:"tipos",header:"TIPO"})]),_:1},8,["value","filters"])]),_:1})]),_:1})]),_:1}),a(G,{visible:A.value,"onUpdate:visible":e[7]||(e[7]=l=>A.value=l),style:{width:"450px"},header:"Nueva Asignatura",modal:!0,closable:!1},{default:t(()=>[a(S(Y),{initialValues:z.value,resolver:S(U),onSubmit:K,class:"border-10"},{default:t(l=>[r("div",pe,[r("div",null,[a(R,{variant:"on"},{default:t(()=>[a(L,{name:"materia",id:"materia",modelValue:n.value,"onUpdate:modelValue":e[4]||(e[4]=i=>n.value=i),style:{height:"36px",width:"400px","text-transform":"uppercase"}},null,8,["modelValue"]),n.value?(s(),p("label",ce,"ASIGNATURA")):(s(),p("label",ve,"INGRESE UNA ASIGNATURA"))]),_:1}),l.materia?.invalid?(s(),V(E,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[c(f(l.materia.error.message),1)]),_:2},1024)):O("",!0)]),r("div",null,[a(R,{variant:"on"},{default:t(()=>[a(F,{name:"tipo",modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=i=>v.value=i),options:[{name:"NÚMERALES",value:"NUMERALES"},{name:"LITERALES",value:"LITERALES"},{name:"FORMACIÓN CIENTÍFICA TECNOLÓGICA Y PRODUCTIVA",value:"FORMACIÓN CIENTÍFICA TECNOLÓGICA Y PRODUCTIVA"},{name:"PRÁCTICA VOCACIONAL Y PROFESIONAL",value:"PRÁCTICA VOCACIONAL Y PROFESIONAL"}],optionLabel:"name",optionValue:"name",id:"tipos",style:{height:"36px",width:"400px"},dataKey:"name",pt:{option:"flex items-center"}},{option:t(i=>[r("div",fe,[r("div",null,f(i.option.name),1)])]),_:1},8,["modelValue"]),n.value?(s(),p("label",ge,"TIPO DE ASIGNATURA")):(s(),p("label",Ae,"INGRESE UN TIPO"))]),_:1}),l.tipo?.invalid?(s(),V(E,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[c(f(l.tipo.error.message),1)]),_:2},1024)):O("",!0)])]),r("div",Ce,[a(u,{color:"primary",type:"submit",label:"Guardar"}),a(u,{color:"secondary",label:"Cancelar",onClick:e[6]||(e[6]=i=>(A.value=!1,x()))})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"]),a(G,{visible:C.value,"onUpdate:visible":e[11]||(e[11]=l=>C.value=l),style:{width:"450px"},header:"Editar Asignatura",modal:!0,closable:!1},{default:t(()=>[a(S(Y),{initialValues:$.value,resolver:S(U),onSubmit:H,class:"border-10"},{default:t(l=>[r("div",ye,[r("div",null,[a(R,{variant:"on"},{default:t(()=>[a(L,{name:"materia",id:"materia",modelValue:n.value,"onUpdate:modelValue":e[8]||(e[8]=i=>n.value=i),style:{height:"36px",width:"400px","text-transform":"uppercase"}},null,8,["modelValue"]),n.value?(s(),p("label",Ie,"ASIGNATURA")):(s(),p("label",_e,"INGRESE UNA ASGINATURA"))]),_:1}),l.materia?.invalid?(s(),V(E,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[c(f(l.materia.error.message),1)]),_:2},1024)):O("",!0)]),r("div",null,[a(R,{variant:"on"},{default:t(()=>[a(F,{name:"tipo",modelValue:v.value,"onUpdate:modelValue":e[9]||(e[9]=i=>v.value=i),options:[{name:"NÚMERALES",value:"NUMERALES"},{name:"LITERALES",value:"LITERALES"},{name:"FORMACIÓN CIENTÍFICA TECNOLÓGICA Y PRODUCTIVA",value:"FORMACIÓN CIENTÍFICA TECNOLÓGICA Y PRODUCTIVA"},{name:"PRÁCTICA VOCACIONAL Y PROFESIONAL",value:"PRÁCTICA VOCACIONAL Y PROFESIONAL"}],optionLabel:"name",optionValue:"name",id:"tipos",style:{height:"36px",width:"400px","background-color":"aliceblue"},placeholder:"Seleccione un tipo",dataKey:"name",pt:{option:"flex items-center"}},{option:t(i=>[r("div",be,[r("div",null,f(i.option.name),1)])]),_:1},8,["modelValue"]),n.value?(s(),p("label",Ne,"TIPO DE ASIGNATURA")):(s(),p("label",xe,"INGRESE UN TIPO"))]),_:1}),l.tipo?.invalid?(s(),V(E,{key:0,severity:"error",size:"small",variant:"simple"},{default:t(()=>[c(f(l.tipo.error.message),1)]),_:2},1024)):O("",!0)])]),r("div",Te,[a(u,{color:"primary",type:"submit",label:"Guardar"}),a(u,{color:"secondary",label:"Cancelar",onClick:e[10]||(e[10]=i=>(C.value=!1,x()))})])]),_:1},8,["initialValues","resolver"])]),_:1},8,["visible"]),a(oe,{modelValue:k.value,"onUpdate:modelValue":e[13]||(e[13]=l=>k.value=l),persistent:""},{default:t(()=>[a(D,{style:{border:"1px","border-color":"#d2d2d2","border-radius":"10px"}},{default:t(()=>[a(w,null,{default:t(()=>e[20]||(e[20]=[r("span",null,[r("strong",{class:"text-h6"},"Borrar")],-1)])),_:1,__:[20]}),r("div",Re,[M(a(u,{flat:"",label:"Borrar",color:"primary",onClick:e[12]||(e[12]=l=>ee())},null,512),[[q]]),M(a(u,{flat:"",label:"cancelar",color:"primary"},null,512),[[q]])])]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Me as default};

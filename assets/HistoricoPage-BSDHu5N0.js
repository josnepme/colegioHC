import{Q as K,a as g}from"./QTr-Dkz9ZL21.js";import{Q as q}from"./QTable-0f2DwlCa.js";import{Q as j}from"./QPage-CeyVCo50.js";import{api as k}from"./axios-DN8dVMgI.js";import{F as G}from"./index-D2eWy4oi.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as v,H as z,e as _,k as d,o as l,p as a,h as n,b as u,c as S,f as w,j as p,t as s}from"./index-BaiCGngT.js";import"./format-M0EPHs9A.js";import"./QChip-DfYhG3Yd.js";import"./QItem-bIrTu2LG.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";const J={class:"row q-gutter-md q-mt-md"},W={key:0,class:"text-primary",for:"seccion"},X={key:1,class:"text-blue-grey-4",for:"periodo"},Y={key:0,class:"text-primary",for:"seccion"},Z={key:1,class:"text-blue-grey-4",for:"seccion"},P={class:"flex flex-wrap gap-2"},ee={class:"text-body2"},ae={class:"text-caption"},te={class:"text-caption"},oe={class:"text-caption"},le={class:"text-caption"},se={class:"text-caption"},ne={class:"text-caption"},de={class:"text-caption"},ie={class:"text-caption"},re={class:"text-caption"},ce={class:"text-caption"},ue={__name:"HistoricoPage",setup(pe){const x=v({global:{value:null,matchMode:G.CONTAINS}}),E=v([]),D=v([]),b=v(null),h=v(null),O=v([]),L=v([]),I=v({}),N=async()=>{var c=new FormData;c.append("opcion",1);const o=await k.post("historico",c).finally(()=>{});D.value=o.data},A=async c=>{var o=new FormData;o.append("opcion",2),o.append("periodo",c);const m=await k.post("historico",o).finally(()=>{});O.value=m.data,E.value=[]},F=async(c,o)=>{if(!c||!o)return;var m=new FormData;m.append("opcion",3),m.append("periodo",c),m.append("seccion",o);const f=await k.post("historico",m).finally(()=>{});E.value=f.data},R=async(c,o,m)=>{var f=new FormData;f.append("opcion",4),f.append("periodo",o),f.append("seccion",m),f.append("cedulae",c);const C=await k.post("historico",f).finally(()=>{});L.value=C.data};z(()=>{N()});const V=c=>{I.value={},I.value[c.data.cedulae]=!0,R(c.data.cedulae,c.data.periodo,c.data.seccion)},M=()=>{R(0,"","")},r=c=>{let o=0;return c&&(o=parseFloat(c)),o.toFixed(2)};return(c,o)=>{const m=_("Select"),f=_("FloatLabel"),C=_("InputIcon"),T=_("InputText"),Q=_("IconField"),y=_("Column"),i=_("Tag"),U=_("ScrollPanel"),B=_("DataTable"),H=_("Card");return l(),d(j,{padding:""},{default:a(()=>[n(H,null,{title:a(()=>o[6]||(o[6]=[p("Historico de Alumnos")])),content:a(()=>[u("div",J,[u("div",null,[n(f,{variant:"on"},{default:a(()=>[n(m,{name:"periodo",id:"periodo",modelValue:b.value,"onUpdate:modelValue":[o[0]||(o[0]=e=>b.value=e),A],options:D.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"periodo","option-value":"periodo",style:{width:"200px"},dataKey:"periodo","clear-icon":"pi pi-trash"},null,8,["modelValue","options"]),b.value?(l(),S("label",W,"PERIODOS")):(l(),S("label",X,"SELECCIONE EL PERIODO"))]),_:1})]),u("div",null,[n(f,{variant:"on"},{default:a(()=>[n(m,{name:"seccion",id:"seccion",modelValue:h.value,"onUpdate:modelValue":[o[1]||(o[1]=e=>h.value=e),o[2]||(o[2]=e=>F(b.value,h.value))],options:O.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"seccion","option-value":"seccion",style:{width:"200px"},dataKey:"seccion"},null,8,["modelValue","options"]),h.value?(l(),S("label",Y,"SECCIONES")):(l(),S("label",Z,"SELECCIONE LA SECCION"))]),_:1})])]),n(B,{expandedRows:I.value,"onUpdate:expandedRows":o[4]||(o[4]=e=>I.value=e),value:E.value,dataKey:"cedulae",filters:x.value,"onUpdate:filters":o[5]||(o[5]=e=>x.value=e),scrollable:"",scrollHeight:"500px",tableStyle:"min-width: 70rem",onRowExpand:V,onRowCollapse:M,showGridlines:""},{header:a(()=>[u("div",P,[n(Q,{iconPosition:"left"},{default:a(()=>[n(C,null,{default:a(()=>o[7]||(o[7]=[u("i",{class:"pi pi-search"},null,-1)])),_:1,__:[7]}),n(T,{modelValue:x.value.global.value,"onUpdate:modelValue":o[3]||(o[3]=e=>x.value.global.value=e),placeholder:"Buscar alumno...",style:{height:"36px",width:"300px"}},null,8,["modelValue"])]),_:1})])]),expansion:a(e=>[u("div",ee,[u("div",null,s(e.data.cedulae)+" - "+s(e.data.nombre)+", "+s(e.data.apellido),1),n(U,{style:{width:"100%",height:"250px"},dt:{bar:{background:"{primary.color}"}}},{default:a(()=>[n(q,{"table-header-class":"text-white bg-secondary glossy text-body2",class:"small-text-table",separator:"cell",dense:"",style:{height:"250px"},"rows-per-page-options":[0],rows:L.value,columns:[{name:"materia",align:"left",label:"MATERIAS",field:"materia",sortable:!0,classes:"text-caption"},{name:"lapso1",align:"center",label:"I LAPSO",field:"lapso1",sortable:!0,classes:"text-caption"},{name:"lapso2",align:"center",label:"II LAPSO",field:"lapso2",sortable:!0,classes:"text-caption"},{name:"lapso3",align:"center",label:"III LAPSO",field:"lapso3",sortable:!0,classes:"text-caption"},{name:"promedio",align:"center",label:"PROMEDIO",field:"promedio",sortable:!0,classes:"text-caption"}],"row-key":"id"},{body:a(t=>[n(K,{props:t},{default:a(()=>[n(g,{key:"materia",props:t},{default:a(()=>[u("span",ae,s(t.row.materia),1)]),_:2},1032,["props"]),n(g,{key:"lapso1",props:t},{default:a(()=>[t.row.lapso1>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[u("span",te,s(t.row.lapso1),1)]),_:2},1024)):t.row.lapso1>9&&t.row.lapso1<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[u("span",oe,s(t.row.lapso1),1)]),_:2},1024)):t.row.lapso1<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[u("span",le,s(t.row.lapso1),1)]),_:2},1024)):w("",!0)]),_:2},1032,["props"]),n(g,{key:"lapso2",props:t},{default:a(()=>[t.row.lapso2>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[u("span",se,s(t.row.lapso2),1)]),_:2},1024)):t.row.lapso2>9&&t.row.lapso2<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[u("span",ne,s(t.row.lapso2),1)]),_:2},1024)):t.row.lapso2<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[u("span",de,s(t.row.lapso2),1)]),_:2},1024)):w("",!0)]),_:2},1032,["props"]),n(g,{key:"lapso3",props:t},{default:a(()=>[t.row.lapso3>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[u("span",ie,s(t.row.lapso3),1)]),_:2},1024)):t.row.lapso3>9&&t.row.lapso3<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[u("span",re,s(t.row.lapso3),1)]),_:2},1024)):t.row.lapso3<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[u("span",ce,s(t.row.lapso3),1)]),_:2},1024)):w("",!0)]),_:2},1032,["props"]),n(g,{key:"promedio",props:t},{default:a(()=>[r(t.row.promedio)>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(s(r(t.row.promedio)),1)]),_:2},1024)):r(t.row.promedio)>9.4&&r(t.row.promedio)<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(s(r(t.row.promedio)),1)]),_:2},1024)):r(t.row.promedio)<9.5?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(s(r(t.row.promedio)),1)]),_:2},1024)):w("",!0)]),_:2},1032,["props"])]),_:2},1032,["props"])]),_:1},8,["rows"])]),_:1})])]),default:a(()=>[n(y,{expander:"",style:{width:"5rem"}}),n(y,{field:"cedulae",header:"CEDULA ESCOLAR"}),n(y,{field:"cedula",header:"CEDULA"}),n(y,{field:"nombre",header:"NOMBRE"}),n(y,{field:"apellido",header:"APELLIDO"}),n(y,{field:"seccion",header:"SECCION"}),n(y,{header:"I LAPSO"},{body:a(e=>[e.data.lapso1>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(s(r(e.data.lapso1)),1)]),_:2},1024)):e.data.lapso1>9&&e.data.lapso1<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(s(r(e.data.lapso1)),1)]),_:2},1024)):e.data.lapso1<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(s(r(e.data.lapso1)),1)]),_:2},1024)):w("",!0)]),_:1}),n(y,{header:"II LAPSO"},{body:a(e=>[e.data.lapso2>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(s(r(e.data.lapso2)),1)]),_:2},1024)):e.data.lapso2>9&&e.data.lapso2<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(s(r(e.data.lapso2)),1)]),_:2},1024)):e.data.lapso2<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(s(r(e.data.lapso2)),1)]),_:2},1024)):w("",!0)]),_:1}),n(y,{header:"III LAPSO"},{body:a(e=>[e.data.lapso3>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(s(r(e.data.lapso3)),1)]),_:2},1024)):e.data.lapso3>9&&e.data.lapso3<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(s(r(e.data.lapso3)),1)]),_:2},1024)):e.data.lapso3<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(s(r(e.data.lapso3)),1)]),_:2},1024)):w("",!0)]),_:1}),n(y,{header:"PROMEDIO"},{body:a(e=>[e.data.promedio>17?(l(),d(i,{key:0,severity:"success",value:"Success"},{default:a(()=>[p(s(r(e.data.promedio)),1)]),_:2},1024)):e.data.promedio>9&&e.data.promedio<18?(l(),d(i,{key:1,severity:"info",value:"Info"},{default:a(()=>[p(s(r(e.data.promedio)),1)]),_:2},1024)):e.data.promedio<10?(l(),d(i,{key:2,severity:"danger",value:"Danger"},{default:a(()=>[p(s(r(e.data.promedio)),1)]),_:2},1024)):w("",!0)]),_:1})]),_:1},8,["expandedRows","value","filters"])]),_:1})]),_:1})}}},Se=$(ue,[["__scopeId","data-v-a3d9beb8"]]);export{Se as default};

import{a as i,H as P,e as u,c as g,o as v,h as a,p as o,b as s,X as _,j as m,t as I,R as q,U as B,u as F,a1 as H,F as G,$ as U,f as Q,k as K}from"./index-BaiCGngT.js";import{Q as T}from"./QTooltip-B7oM7xJw.js";import{Q as z}from"./QPage-CeyVCo50.js";import{C as $}from"./ClosePopup-DY4xp4Mw.js";import{api as w}from"./axios-DN8dVMgI.js";import{F as J}from"./index-D2eWy4oi.js";import{d as X}from"./dayjs.min-BKp1R7gU.js";import"./position-engine-B8a81rwn.js";import"./index-DR3ylfnb.js";import"./_commonjsHelpers-CqkleIqs.js";const Y={class:"row q-gutter-sm"},W={key:0,class:"text-primary",for:"seccion"},Z={key:1,class:"text-blue-grey-4",for:"seccion"},ee={key:0,class:"text-primary",for:"materia"},ae={key:1,class:"text-blue-grey-4",for:"materia"},oe={key:0,class:"row q-mt-sm"},te={key:1,class:"row q-mt-sm"},le={align:"right",class:"q-mt-md"},ne={__name:"seccionesMaterias",props:["nombre","apellido","idprofesor"],setup(L){const c=L,y=i(""),x=i([]),h=i([]),f=i([]),p=i(""),b=i(!1),C=i(null),D=async()=>{var r=new FormData;r.append("opcion",2);const e=await w.post("secciones",r).finally(()=>{});x.value=e.data},O=async()=>{var r=new FormData;r.append("opcion",1);const e=await w.post("materias",r).finally(()=>{});h.value=e.data},N=async()=>{var r=new FormData;r.append("opcion",2),r.append("idprof",c.idprofesor);const e=await w.post("profesores",r).finally(()=>{});f.value=e.data};P(()=>{D(),O(),N()});const A=async()=>{var r=new FormData;r.append("opcion",3),r.append("idprof",c.idprofesor),r.append("idseccion",y.value),r.append("idmateria",p.value),await w.post("profesores",r).then(e=>{e.data.mensaje=="ok"?U.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):U.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{N(),M()})},l=r=>{C.value=r,b.value=!0},E=async()=>{var r=new FormData;r.append("opcion",4),r.append("id",C.value),await w.post("profesores",r).then(e=>{e.data.mensaje=="ok"?U.create({message:"Borrado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):U.create({message:e.data.mensaje+" "+e.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{N()})},M=()=>{y.value="",p.value=""};return(r,e)=>{const t=u("Select"),k=u("FloatLabel"),S=u("Column"),n=u("DataTable"),V=u("Message"),j=u("Card");return v(),g(G,null,[a(j,null,{title:o(()=>[m(I(c.nombre)+" "+I(c.apellido),1)]),content:o(()=>[s("div",Y,[s("div",null,[a(k,{variant:"on"},{default:o(()=>[a(t,{name:"seccion",id:"seccion",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=R=>y.value=R),options:x.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"descripcion","option-value":"id",style:{width:"150px"},dataKey:"id","clear-icon":"pi pi-trash",showClear:""},null,8,["modelValue","options"]),y.value?(v(),g("label",W,"SECCÍON")):(v(),g("label",Z,"INGRESE UNA SECCÍON"))]),_:1})]),s("div",null,[a(k,{variant:"on"},{default:o(()=>[a(t,{name:"materia",id:"materia",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=R=>p.value=R),options:h.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"materia","option-value":"id",style:{width:"350px"},dataKey:"id","clear-icon":"pi pi-trash",showClear:""},null,8,["modelValue","options"]),p.value?(v(),g("label",ee,"ASIGNATURA")):(v(),g("label",ae,"INGRESE UNA ASIGNATURA"))]),_:1})]),a(_,{push:"",color:"primary","text-color":"white",icon:"add",disable:!(y.value&&p.value),onClick:e[2]||(e[2]=R=>A())},{default:o(()=>[a(T,{class:"text-body1"},{default:o(()=>e[5]||(e[5]=[m(" Agregar seccíon y asignatura ")])),_:1,__:[5]})]),_:1},8,["disable"])]),f.value.length>0?(v(),g("div",oe,[a(n,{value:f.value,scrollable:"",scrollHeight:"flex"},{footer:o(()=>[m(" Total "+I(f.value?f.value.length:0)+" Registros. ",1)]),default:o(()=>[a(S,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:o(R=>[a(_,{round:"",color:"red",icon:"delete",padding:"xs",size:"sm",onClick:d=>l(R.data.id)},{default:o(()=>[a(T,null,{default:o(()=>e[6]||(e[6]=[m(" Borrar ")])),_:1,__:[6]})]),_:2},1032,["onClick"])]),_:1}),a(S,{field:"descripcion",header:"SECCION"}),a(S,{field:"materia",header:"ASIGNATURA"})]),_:1},8,["value"])])):(v(),g("div",te,[a(V,{severity:"error"},{default:o(()=>e[7]||(e[7]=[m("No tiene asignaturas ni secciones asignadas...")])),_:1,__:[7]})]))]),_:1}),a(H,{modelValue:b.value,"onUpdate:modelValue":e[4]||(e[4]=R=>b.value=R),persistent:""},{default:o(()=>[a(q,{style:{border:"1px","border-color":"#d2d2d2","border-radius":"10px"}},{default:o(()=>[a(B,null,{default:o(()=>e[8]||(e[8]=[s("span",null,[s("strong",{class:"text-h6"},"Borrar")],-1)])),_:1,__:[8]}),s("div",le,[F(a(_,{flat:"",label:"Borrar",color:"primary",onClick:e[3]||(e[3]=R=>E())},null,512),[[$]]),F(a(_,{flat:"",label:"cancelar",color:"primary"},null,512),[[$]])])]),_:1})]),_:1},8,["modelValue"])],64)}}},re={class:"row q-gutter-md q-mt-md"},se={key:0,class:"text-primary",for:"seccion"},ie={key:1,class:"text-blue-grey-4",for:"seccion"},de={key:0,class:"font-bold block",for:"seccion"},ue={key:1,class:"font-bold block",for:"seccion"},pe={class:"q-mt-md q-gutter-md"},ce={key:0,class:"row q-mt-sm"},me={align:"right",class:"q-mt-md"},fe={__name:"horariosComponent",props:["nombre","idprofesor","apellido"],setup(L){const c=L,y=i([]),x=i(""),h=i(),f=i(),p=i(""),b=i([]),C=i(null),D=i(!1),O=async()=>{var e=new FormData;e.append("opcion",5),e.append("idprof",c.idprofesor);const t=await w.post("profesores",e).finally(()=>{});y.value=t.data},N=async()=>{var e=new FormData;e.append("opcion",6),e.append("idprof",c.idprofesor);const t=await w.post("profesores",e).finally(()=>{});b.value=t.data};P(()=>{O(),N()});const A=async()=>{var e=new FormData;e.append("opcion",7),e.append("idprof",c.idprofesor),e.append("hora",h.value),e.append("salida",f.value),e.append("dia",p.value),e.append("asignatura",x.value.asignatura),e.append("idseccion",x.value.id_seccion),await w.post("profesores",e).then(t=>{t.data.mensaje=="ok"?U.create({message:"Guardado Satisfactoriamente",icon:"check",color:"positive",textColor:"white",position:"center"}):U.create({message:t.data.mensaje+" "+t.data.error,icon:"error",color:"negative",textColor:"white",position:"center"})}).finally(()=>{N(),E()})},l=()=>{var e=new FormData;e.append("id",C.value),e.append("opcion",8),w.post("profesores",e).then(t=>{U.create({message:t.data.mensaje,icon:"check",color:"positive",textColor:"white",position:"center"})}).finally(()=>{N()}).catch(t=>{console.error("There was an error!",t.message)})},E=()=>{x.value="",h.value="",f.value="",p.value="",C.value=null},M=()=>{var e=new FormData;e.append("id_prof",c.idprofesor),e.append("nombre",c.nombre+" "+c.apellido),e.append("opcion",2),w.post("horarios",e,{responseType:"arraybuffer",headers:{Accept:"application/pdf"}}).then(t=>{var k=t.data;const S=window.URL.createObjectURL(new Blob([k])),n=document.createElement("a");n.href=S,n.setAttribute("download","HORARIOS PROFESOR.pdf"),document.body.appendChild(n),n.click(),URL.revokeObjectURL(n.href),document.body.removeChild(n)}).finally(()=>{}).catch(t=>{console.error("There was an error!",t.message)})},r=e=>{let[t,k]=e.split(":");return X().hour(t).minute(k).format("hh:mm a")};return(e,t)=>{const k=u("Select"),S=u("FloatLabel"),n=u("InputText"),V=u("Column"),j=u("DataTable"),R=u("Card");return v(),g(G,null,[a(R,{style:{width:"600px"}},{title:o(()=>[m(I(c.nombre)+" "+I(L.apellido),1)]),content:o(()=>[s("div",re,[s("div",null,[a(S,{variant:"on"},{default:o(()=>[a(k,{name:"asignatura",id:"asignatura",modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=d=>x.value=d),options:y.value,filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"asignatura",style:{width:"450px"},dataKey:"id","clear-icon":"pi pi-trash",showClear:""},null,8,["modelValue","options"]),e.seccion?(v(),g("label",se,"ASIGNATURAS")):(v(),g("label",ie,"INGRESE UNA ASIGNATURA"))]),_:1})]),s("div",null,[t[8]||(t[8]=s("label",{for:"datepicker-timeonly",class:"font-bold block"},"HORA ENTRADA",-1)),a(n,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=d=>h.value=d),type:"time",style:{width:"150px",height:"36px"}},null,8,["modelValue"])]),s("div",null,[t[9]||(t[9]=s("label",{for:"datepicker-timeonly",class:"font-bold block"},"HORA SALIDA",-1)),a(n,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=d=>f.value=d),type:"time",style:{width:"150px",height:"36px"}},null,8,["modelValue"])]),s("div",null,[p.value?(v(),g("label",de,"DIA")):(v(),g("label",ue,"INGRESE UN DIA")),a(k,{name:"dia",id:"dia",modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=d=>p.value=d),options:[{name:"LUNES"},{name:"MARTES"},{name:"MIERCOLES"},{name:"JUEVES"},{name:"VIERNES"}],filter:"",emptyFilterMessage:"No se Encontro El Registro",emptyMessage:"No hay Registros",optionLabel:"name","option-value":"name",style:{width:"180px"},dataKey:"name","clear-icon":"pi pi-trash",showClear:""},null,8,["modelValue"])])]),s("div",pe,[a(_,{push:"",color:"primary","text-color":"white",icon:"add",disable:!(x.value&&p.value&&h.value&&f.value),onClick:t[4]||(t[4]=d=>A())},{default:o(()=>[a(T,{class:"text-body1"},{default:o(()=>t[10]||(t[10]=[m(" Agregar ")])),_:1,__:[10]})]),_:1},8,["disable"]),a(_,{push:"",color:"secondary","text-color":"white",icon:"print",onClick:t[5]||(t[5]=d=>M())},{default:o(()=>[a(T,{class:"text-body1"},{default:o(()=>t[11]||(t[11]=[m("Imprimir")])),_:1,__:[11]})]),_:1})]),b.value.length>0?(v(),g("div",ce,[a(j,{value:b.value,scrollable:"",scrollHeight:"flex"},{footer:o(()=>[m(" Total "+I(b.value?b.value.length:0)+" Registros. ",1)]),default:o(()=>[a(V,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:o(d=>[a(_,{round:"",color:"red",icon:"delete",padding:"xs",size:"sm",onClick:he=>(C.value=d.data.id,D.value=!0)},{default:o(()=>[a(T,null,{default:o(()=>t[12]||(t[12]=[m(" Borrar ")])),_:1,__:[12]})]),_:2},1032,["onClick"])]),_:1}),a(V,{field:"hora",header:"ENTRADAS"},{body:o(d=>[m(I(r(d.data.hora)),1)]),_:1}),a(V,{field:"salida",header:"SALIDAS"},{body:o(d=>[m(I(r(d.data.salida)),1)]),_:1}),a(V,{field:"dia",header:"DIA"}),a(V,{field:"asignatura",header:"ASIGNATURAS"})]),_:1},8,["value"])])):Q("",!0)]),_:1}),a(H,{modelValue:D.value,"onUpdate:modelValue":t[7]||(t[7]=d=>D.value=d),persistent:""},{default:o(()=>[a(q,{dark:"",style:{border:"1px","border-color":"#d2d2d2","border-radius":"10px"}},{default:o(()=>[a(B,null,{default:o(()=>t[13]||(t[13]=[s("span",null,[s("strong",{class:"text-h6"},"Borrar Horario")],-1)])),_:1,__:[13]}),s("div",me,[F(a(_,{flat:"",label:"Borrar",color:"primary",onClick:t[6]||(t[6]=d=>l())},null,512),[[$]]),F(a(_,{flat:"",label:"cancelar",color:"primary"},null,512),[[$]])])]),_:1})]),_:1},8,["modelValue"])],64)}}},ve={class:"flex flex-wrap items-center gap-2"},ge={class:"q-gutter-sm"},ye=["src"],be={class:"q-mt-sm"},_e={class:"q-mt-sm"},Ie={__name:"matriculaProfesores",setup(L){const c=i({global:{value:null,matchMode:J.CONTAINS}}),y=i([]),x=i(),h=i(!1),f=i(!1),p=i(""),b=i(""),C=i(null),D=async()=>{var A=new FormData;A.append("opcion",1);const l=await w.post("profesores",A).finally(()=>{});y.value=l.data};P(()=>{D(),x.value=w.defaults.baseURL});const O=(A,l,E)=>{C.value=A,p.value=l,b.value=E,h.value=!0},N=(A,l,E)=>{C.value=A,p.value=l,b.value=E,f.value=!0};return(A,l)=>{const E=u("InputIcon"),M=u("InputText"),r=u("IconField"),e=u("Column"),t=u("Avatar"),k=u("DataTable"),S=u("Dialog");return v(),g(G,null,[a(z,{padding:""},{default:o(()=>[a(q,{class:"my-card"},{default:o(()=>[a(B,null,{default:o(()=>l[7]||(l[7]=[s("div",{class:"text-h6"},"PROFESORES",-1)])),_:1,__:[7]}),a(B,null,{default:o(()=>[a(k,{value:y.value,tableStyle:"min-width: 50rem",rows:5,rowsPerPageOptions:[5,10,20],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"{first} a {last} de {totalRecords}",filters:c.value,"onUpdate:filters":l[2]||(l[2]=n=>c.value=n),dataKey:"id",paginator:!0},{empty:o(()=>l[8]||(l[8]=[m(" No se encontraron Registros. ")])),footer:o(()=>[m(" Total "+I(y.value?y.value.length:0)+" Registros. ",1)]),header:o(()=>[s("div",ve,[a(r,{iconPosition:"left"},{default:o(()=>[a(E,null,{default:o(()=>l[9]||(l[9]=[s("i",{class:"pi pi-search"},null,-1)])),_:1,__:[9]}),a(M,{modelValue:c.value.global.value,"onUpdate:modelValue":l[0]||(l[0]=n=>c.value.global.value=n),placeholder:"Buscar...",style:{height:"36px"}},null,8,["modelValue"])]),_:1}),a(_,{flat:"",round:"",icon:"refresh",onClick:l[1]||(l[1]=n=>D())},{default:o(()=>[a(T,null,{default:o(()=>l[10]||(l[10]=[m(" Refrescar ")])),_:1,__:[10]})]),_:1})])]),default:o(()=>[a(e,{field:"accion",header:"Accion",headerStyle:"text-align:center items-center justify-center",bodyStyle:"text-align:left"},{body:o(n=>[s("div",ge,[a(_,{size:"sm",class:"shadow-5",round:"",color:"deep-orange-8",icon:"las la-edit",padding:"xs",onClick:V=>O(n.data.id,n.data.nombre,n.data.apellido)},{default:o(()=>[a(T,{"transition-show":"scale","transition-hide":"scale",class:"bg-deep-orange-8 text-body2",offset:[10,10]},{default:o(()=>l[11]||(l[11]=[m(" Asignar Materias y Secciones ")])),_:1,__:[11]})]),_:2},1032,["onClick"]),a(_,{round:"",color:"deep-purple-9",icon:"las la-calendar-times",padding:"xs",size:"sm",onClick:V=>N(n.data.id,n.data.nombre,n.data.apellido)},{default:o(()=>[a(T,{class:"bg-deep-purple-9 text-body2",offset:[10,10]},{default:o(()=>l[12]||(l[12]=[m(" Asignar Horarios ")])),_:1,__:[12]})]),_:2},1032,["onClick"])])]),_:1}),a(e,{field:"foto",header:"FOTO",headerStyle:"text-align:center"},{body:o(n=>[n.data.foto?(v(),g("img",{key:0,src:x.value+"fotos/"+n.data.foto,class:"zoom rounded-borders",style:{"max-width":"40px",height:"40px"}},null,8,ye)):(v(),K(t,{key:1,icon:"pi pi-user",style:{"background-color":"#dee9fc",color:"#1a2551"}}))]),_:1}),a(e,{field:"cedula",header:"CEDULA"}),a(e,{field:"nombre",header:"NOMBRE"}),a(e,{field:"apellido",header:"APELLIDO"})]),_:1},8,["value","filters"])]),_:1})]),_:1})]),_:1}),a(S,{visible:h.value,"onUpdate:visible":l[4]||(l[4]=n=>h.value=n),style:{width:"500px",height:"500px"},header:"SECCIONES Y ASIGNATURAS",modal:!0,closable:!1},{default:o(()=>[a(ne,{nombre:p.value,apellido:b.value,idprofesor:C.value},null,8,["nombre","apellido","idprofesor"]),s("div",be,[F(a(_,{color:"primary",label:"OK",onClick:l[3]||(l[3]=n=>h.value=!1)},null,512),[[$]])])]),_:1},8,["visible"]),a(S,{visible:f.value,"onUpdate:visible":l[6]||(l[6]=n=>f.value=n),style:{width:"680px"},header:"Horarios",modal:!0,closable:!1},{default:o(()=>[a(fe,{nombre:p.value,apellido:b.value,idprofesor:C.value},null,8,["nombre","apellido","idprofesor"]),s("div",_e,[F(a(_,{color:"primary",label:"OK",onClick:l[5]||(l[5]=n=>f.value=!1)},null,512),[[$]])])]),_:1},8,["visible"])],64)}}};export{Ie as default};
